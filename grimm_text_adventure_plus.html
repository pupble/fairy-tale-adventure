
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æ ¼æ—å¿ƒæ„¿ä¹¦ Â· äº’åŠ¨ç«¥è¯å†’é™©</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    :root {
      --bg: radial-gradient(circle at top, #ffe1f0 0%, #c9f0ff 45%, #f5f7ff 100%);
      --card-bg: rgba(255,255,255,0.9);
      --accent: #ff6fa9;
      --accent-soft: rgba(255,111,169,0.14);
      --text-main: #1f2430;
      --text-soft: #667085;
      --border-soft: rgba(15,23,42,0.06);
      --shadow-soft: 0 18px 45px rgba(15,23,42,0.12);
      --radius-xl: 22px;
    }
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont,"SF Pro Text","PingFang SC","Hiragino Sans GB","Microsoft YaHei",system-ui,sans-serif;
      color: var(--text-main);
      background-image: var(--bg);
      background-attachment: fixed;
    }
    body {
      display: flex;
      justify-content: center;
      align-items: stretch;
    }
    #app {
      width: 100%;
      max-width: 480px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding: 14px 14px 22px;
    }
    header {
      padding: 6px 4px 10px;
    }
    header h1 {
      margin: 2px 0 4px;
      font-size: 1.28rem;
      letter-spacing: 0.04em;
      font-weight: 750;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    header h1 span.emoji {
      font-size: 1.4rem;
      filter: drop-shadow(0 3px 6px rgba(0,0,0,0.2));
    }
    header p {
      margin: 0;
      font-size: 0.82rem;
      color: var(--text-soft);
    }
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .card {
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-soft);
      padding: 12px 14px 14px;
      backdrop-filter: blur(10px);
    }
    .hidden { display: none; }

    /* æ€»è§ˆé¡µ */
    #overview {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    #overview-header {
      margin-bottom: 2px;
    }
    #overview-header h2 {
      margin: 0 0 4px;
      font-size: 1.02rem;
    }
    #overview-header p {
      margin: 0;
      font-size: 0.8rem;
      color: var(--text-soft);
    }
    #story-list {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 380px) {
      #story-list {
        grid-template-columns: 1fr;
      }
    }
    .story-card {
      position: relative;
      overflow: hidden;
      padding: 10px 10px 11px;
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,0.35);
      background: radial-gradient(circle at top left, rgba(255,255,255,0.95), rgba(244,244,255,0.92));
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
    }
    .story-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 30px rgba(15,23,42,0.16);
      border-color: rgba(236,72,153,0.55);
    }
    .story-badge {
      position: absolute;
      top: 6px;
      right: 8px;
      font-size: 0.65rem;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(15,118,110,0.08);
      color: #0f766e;
    }
    .story-emoji {
      font-size: 1.3rem;
      margin-bottom: 4px;
    }
    .story-title {
      font-size: 0.9rem;
      font-weight: 650;
      margin-bottom: 3px;
    }
    .story-tagline {
      font-size: 0.74rem;
      color: var(--text-soft);
      margin-bottom: 6px;
      min-height: 30px;
    }
    .story-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.68rem;
      color: var(--text-soft);
    }
    .story-meta span.chips {
      display: inline-flex;
      gap: 3px;
      flex-wrap: wrap;
    }
    .chip {
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      background: rgba(248,250,252,0.95);
    }
    .chip.found {
      border-color: rgba(236,72,153,0.8);
      background: rgba(236,72,153,0.08);
      color: #be185d;
      font-weight: 500;
    }

    /* æ•…äº‹é¡µ */
    #story-view {
      display: none;
      flex-direction: column;
      gap: 10px;
    }
    #story-view.active {
      display: flex;
    }
    #story-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 2px;
    }
    #back-btn {
      border-radius: 999px;
      border: none;
      padding: 5px 10px;
      font-size: 0.78rem;
      cursor: pointer;
      background: rgba(15,23,42,0.04);
    }
    #story-name {
      font-size: 0.98rem;
      font-weight: 650;
      flex: 1;
    }
    #story-tools {
      display: flex;
      gap: 6px;
    }
    .pill-btn {
      border-radius: 999px;
      border: none;
      padding: 5px 9px;
      font-size: 0.72rem;
      cursor: pointer;
      background: rgba(79,70,229,0.08);
      color: #3730a3;
    }

    #story-main-card {
      padding-top: 10px;
    }
    #story-image {
      width: 100%;
      height: 140px;
      border-radius: 18px;
      background: linear-gradient(135deg, #fecaca, #fee2e2);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 8px;
      position: relative;
      overflow: hidden;
    }
    #story-image .image-emoji {
      font-size: 2.4rem;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,0.25));
    }
    #story-image .image-label {
      position: absolute;
      bottom: 7px;
      right: 10px;
      font-size: 0.7rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.65);
      color: #f9fafb;
    }
    #scene-text {
      font-size: 0.86rem;
      line-height: 1.6;
      margin-bottom: 10px;
      white-space: pre-line;
    }
    #mini-game-area {
      margin-bottom: 8px;
      font-size: 0.82rem;
    }
    #mini-game-area .mini-title {
      font-weight: 600;
      font-size: 0.8rem;
      margin-bottom: 4px;
    }
    #mini-game-area .mini-hint {
      font-size: 0.78rem;
      color: var(--text-soft);
      margin-bottom: 6px;
    }
    .mini-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(34,197,94,0.09);
      color: #166534;
      font-size: 0.7rem;
      margin-left: 4px;
    }
    .mini-options {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }
    .mini-input-row {
      display: flex;
      gap: 6px;
      margin-top: 4px;
    }
    .mini-input-row input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.9);
      padding: 5px 10px;
      font-size: 0.8rem;
    }

    #choices {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }
    .choice-btn {
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      padding: 7px 11px;
      font-size: 0.83rem;
      text-align: left;
      cursor: pointer;
      background: linear-gradient(135deg, rgba(248,250,252,0.96), rgba(240,249,255,0.96));
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }
    .choice-btn span.label {
      flex: 1;
    }
    .choice-btn span.arrow {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    .choice-btn.primary {
      border-color: rgba(236,72,153,0.8);
      background: linear-gradient(135deg, rgba(252,231,243,0.98), rgba(254,249,195,0.98));
    }

    .ending-tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 0.7rem;
      background: rgba(59,130,246,0.1);
      color: #1d4ed8;
      margin-bottom: 4px;
    }

    /* å‰§æƒ…åœ°å›¾ modal */
    #story-map-modal {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.36);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 20;
    }
    #story-map-modal.active {
      display: flex;
    }
    #story-map {
      max-width: 460px;
      width: 100%;
      background: rgba(248,250,252,0.98);
      border-radius: 20px;
      box-shadow: 0 24px 60px rgba(15,23,42,0.45);
      border: 1px solid rgba(148,163,184,0.65);
      padding: 12px 14px 14px;
    }
    #story-map h3 {
      margin: 0 0 4px;
      font-size: 0.98rem;
    }
    #story-map p.desc {
      margin: 0 0 8px;
      font-size: 0.78rem;
      color: var(--text-soft);
    }
    #branch-list {
      max-height: 260px;
      overflow-y: auto;
      padding-right: 4px;
      margin-bottom: 8px;
    }
    .branch-item {
      border-radius: 14px;
      border: 1px dashed rgba(148,163,184,0.7);
      padding: 6px 8px 7px;
      margin-bottom: 6px;
      background: rgba(255,255,255,0.95);
    }
    .branch-title {
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 3px;
    }
    .branch-note {
      font-size: 0.74rem;
      color: var(--text-soft);
      margin-bottom: 4px;
    }
    .branch-actions {
      display: flex;
      justify-content: flex-end;
    }
    .branch-actions button {
      border-radius: 999px;
      border: none;
      padding: 4px 8px;
      font-size: 0.72rem;
      cursor: pointer;
      background: rgba(59,130,246,0.08);
      color: #1d4ed8;
    }
    #map-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.72rem;
    }
    #map-footer button {
      border-radius: 999px;
      border: none;
      padding: 4px 9px;
      cursor: pointer;
      background: rgba(15,23,42,0.06);
    }

    footer {
      margin-top: 10px;
      font-size: 0.7rem;
      color: var(--text-soft);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 4px;
    }
    footer span.dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: rgba(148,163,184,0.8);
      display: inline-block;
      margin: 0 4px;
    }
  </style>
</head>
<body>
<div id="app">
  <header>
    <h1><span class="emoji">ğŸ“–</span><span>æ ¼æ—å¿ƒæ„¿ä¹¦ Â· äº’åŠ¨ç«¥è¯å†’é™©</span></h1>
    <p>ä¸ºä¸€ä¸ªé‡è¦çš„äººå‡†å¤‡çš„å°å°ç½‘é¡µæ¸¸æˆï¼šå…­æ¡æ ¼æ—ç«¥è¯å¹³è¡Œå®‡å®™ï¼Œä½ çš„æ¯ä¸€ä¸ªé€‰æ‹©ï¼Œéƒ½ä¼šæ”¹å˜ç»“å±€ã€‚</p>
  </header>

  <main>
    <!-- æ€»è§ˆ -->
    <section id="overview" class="card">
      <div id="overview-header">
        <h2>æ•…äº‹æ€»è§ˆ Â· é€‰æ‹©ä¸€æ¡å¼€å§‹</h2>
        <p>ä»»æ„é¡ºåºéƒ½å¯ä»¥ç©å®Œï¼Œæ¯æ¡æ•…äº‹éƒ½æœ‰å¤šä¸ªç»“å±€å’Œè‡³å°‘ä¸€ä¸ªéšè—ç»“å±€ã€‚</p>
      </div>
      <div id="story-list">
        <!-- åŠ¨æ€å¡«å…… -->
      </div>
    </section>

    <!-- æ•…äº‹è§†å›¾ -->
    <section id="story-view">
      <div class="card" id="story-header-card">
        <div id="story-header">
          <button id="back-btn">â† è¿”å›æ€»è§ˆ</button>
          <h2 id="story-name"></h2>
          <div id="story-tools">
            <button class="pill-btn" id="map-btn">å‰§æƒ…åœ°å›¾</button>
            <button class="pill-btn" id="restart-btn">é‡å¼€æœ¬æ•…äº‹</button>
          </div>
        </div>
      </div>

      <div class="card" id="story-main-card">
        <div id="story-image">
          <span class="image-emoji" id="story-emoji">âœ¨</span>
          <span class="image-label" id="story-label">ç¬¬ä¸€ç« </span>
        </div>
        <div id="scene-text"></div>
        <div id="mini-game-area"></div>
        <div id="choices"></div>
      </div>
    </section>
  </main>

  <footer>
    <span>é€‚é…æ‰‹æœº Â· å•é¡µå³å¯åˆ†äº«</span>
    <span><span class="dot"></span>By you<span class="dot"></span></span>
  </footer>
</div>

<!-- å‰§æƒ…åœ°å›¾ Modal -->
<div id="story-map-modal">
  <div id="story-map">
    <h3 id="map-title">å‰§æƒ…ç»“æ„</h3>
    <p class="desc" id="map-desc">ä»ä»»æ„ä¸€ä¸ªèµ·ç‚¹è¿›å…¥ï¼Œä½“éªŒä¸åŒåˆ†æ”¯ã€‚</p>
    <div id="branch-list"></div>
    <div id="map-footer">
      <span id="map-progress"></span>
      <button id="map-close-btn">å…³é—­</button>
    </div>
  </div>
</div>

<script>
  // ========= æ•…äº‹æ•°æ® =========
  const stories = {
    red: {
      id: "red",
      emoji: "ğŸ§£",
      title: "ç»¯çº¢å°è·¯ä¸æ¸©æŸ”å¤§ç°ç‹¼",
      tagline: "å…³äºç›¸ä¿¡ã€è¯•æ¢å’Œå¥½å¥½è¯´å†è§ã€‚",
      label: "å°çº¢å¸½çº¿",
      themeLabel: "æœˆå…‰æ£®æ—",
      endingsMeta: [
        { id: "red_good", name: "æ²»æ„ˆç»“å±€" },
        { id: "red_bad", name: "å±é™©ç»“å±€" },
        { id: "red_secret", name: "å·å·å†™ä¿¡çš„ç»“å±€" }
      ],
      scenes: [
        {
          id: "red_intro",
          isStart: true,
          branchTitle: "æ™®é€šå¼€å±€ï¼šèµ°è¿›æœˆå…‰æ£®æ—",
          branchNote: "æœ€ç»å…¸çš„å°çº¢å¸½å¼€å±€ï¼Œä»å²”è·¯å£å¼€å§‹é€‰æ‹©ç›¸ä¿¡è°ã€‚",
          imageEmoji: "ğŸ§£",
          label: "æœˆå…‰æ£®æ—Â·è·¯å£",
          text: "å¤œè‰²åˆšåˆšè½ä¸‹ï¼Œæ£®æ—çš„ç©ºæ°”å¸¦ç€ä¸€ç‚¹å†·ã€‚ä½ æŠ«ç€ç»¯çº¢è‰²çš„å°æŠ«é£ï¼Œç»™å¤–å©†é€çƒ­æ±¤ã€‚\n\nå‰é¢çš„å²”è·¯å£ï¼Œä¸€è¾¹æ˜¯é€šå¾€å¤–å©†å®¶çš„è¿‘è·¯ï¼Œæ ‘å½±å¾ˆæ·±ï¼›å¦ä¸€è¾¹æ˜¯æœ‰äººå®¶ç¯ç«çš„ç»•è¿œå°è·¯ã€‚\n\nå°±åœ¨è¿™æ—¶ï¼Œä¸€åªçœ‹èµ·æ¥æœ‰ç‚¹å§”å±ˆçš„å¤§ç°ç‹¼ï¼Œèµ°åˆ°äº†ä½ èº«è¾¹ã€‚",
          choices: [
            { text: "å…ˆå¬å¬å¤§ç°ç‹¼æƒ³è¯´ä»€ä¹ˆ", next: "red_listen" },
            { text: "ç¤¼è²Œæ‹’ç»ï¼Œé€‰æ‹©èµ°æœ‰ç¯ç«çš„ç»•è·¯", next: "red_safe_path" }
          ]
        },
        {
          id: "red_listen",
          imageEmoji: "ğŸº",
          label: "æœˆå…‰æ£®æ—Â·æ ‘ä¸‹",
          text: "å¤§ç°ç‹¼ä½ç€å¤´ï¼Œè¯´å®ƒåªæ˜¯æƒ³é™ªä½ ä¸€èµ·èµ°ä¸€æ®µè·¯ï¼š\nâ€œæ™šä¸ŠçœŸçš„æœ‰ç‚¹å†·ï¼Œæˆ‘å¯ä»¥èµ°åœ¨ä½ å‰é¢æŒ¡é£ã€‚å¦‚æœä½ ä¸èˆ’æœï¼Œæˆ‘ä»¬éšæ—¶åˆ†å¼€ã€‚â€\n\nå®ƒç”šè‡³è®¤çœŸåœ°ä»èƒŒåŒ…é‡Œæå‡ºä¸€å¼ æ‰‹ç»˜åœ°å›¾ï¼Œæ ‡å‡ºäº†è‡ªå·±ä¸ä¼šé è¿‘çš„èŒƒå›´ã€‚",
          miniGame: {
            type: "memory",
            title: "å°å…³å¡ï¼šè®°ä½å®‰å…¨çº¦å®š",
            hint: "å…ˆè®°ä½ä¸‹é¢ä¸‰æ¡çº¦å®šï¼Œ5 ç§’åä¼šæ¶ˆå¤±ï¼Œç„¶åé€‰å‡ºçœŸæ­£è¯´è¿‡çš„ä¸€æ¡ã€‚",
            words: [
              "ä¿æŒä¸€è‡‚è·ç¦»è¡Œèµ°",
              "ä¸èƒ½è·Ÿä½ è¯´è¯",
              "ä½ è¦æŠŠæ‰‹æœºå…³æœº"
            ],
            correctIndex: 0,
            successNext: "red_trust_walk",
            failNext: "red_danger_flag"
          },
          choices: []
        },
        {
          id: "red_trust_walk",
          imageEmoji: "ğŸŒ™",
          label: "æœˆå…‰æ£®æ—Â·å¹¶è‚©",
          text: "ä½ è®¤çœŸé‡å¤äº†ä¸€éâ€œä¿æŒä¸€è‡‚è·ç¦»è¡Œèµ°â€çš„çº¦å®šï¼Œå¤§ç°ç‹¼ç‚¹ç‚¹å¤´ï¼Œåˆ»æ„èµ°å¾—æ¯”ä½ æ›´è¿œä¸€ç‚¹ã€‚\n\nä¸€è·¯ä¸Šï¼Œå®ƒåªåœ¨ä½ å¼€å£æ—¶æ‰å›åº”ï¼Œå¶å°”æé†’ä½ å‰é¢æœ‰å‘ã€‚ä½ æœ‰ç‚¹æ”¾æ¾ä¸‹æ¥ï¼Œä¹Ÿæœ‰ç‚¹å¥½å¥‡ï¼šæˆ–è®¸ï¼Œåˆ«äººè¯´çš„â€œå±é™©â€ä¸ä¸€å®šæ°¸è¿œæ­£ç¡®ã€‚",
          choices: [
            { text: "èŠèŠå®ƒä¸ºä»€ä¹ˆæ€»æ˜¯ä¸€ä¸ªäºº", next: "red_open_up" },
            { text: "åˆ°å²”è·¯å£ä¸»åŠ¨æå‡ºï¼Œå„èµ°å„çš„", next: "red_goodbye" }
          ]
        },
        {
          id: "red_open_up",
          imageEmoji: "ğŸ’¬",
          label: "æœˆå…‰æ£®æ—Â·è°ˆå¿ƒ",
          text: "å¤§ç°ç‹¼æ…¢æ…¢è®²èµ·è‡ªå·±çš„æ•…äº‹ï¼šå°æ—¶å€™å› ä¸ºé•¿ç›¸å‡¶ï¼Œè¢«å¤§å®¶è‡ªåŠ¨å½’ç±»åˆ°â€œåå®¶ä¼™â€çš„é‚£ä¸€è¾¹ã€‚\n\nå®ƒæ²¡æœ‰ä¸ºè‡ªå·±è¾©è§£ï¼Œåªæ˜¯å¹³é™åœ°è¯´ï¼šâ€œæ‰€ä»¥æˆ‘ä¹ æƒ¯èµ°åœ¨åˆ«äººå‰é¢ä¸€ç‚¹ï¼Œåˆ«äººå®³æ€•æˆ‘å°±è‡ªå·±ç»•è·¯ã€‚æˆ‘ä¹Ÿå°±ä¸æ‰“æ‰°ã€‚â€\n\nä½ æ„è¯†åˆ°ï¼ŒåŸæ¥â€œè§’è‰²â€æœ‰æ—¶å€™åªæ˜¯æ ‡ç­¾ã€‚",
          choices: [
            { text: "å‘Šè¯‰å®ƒï¼Œä½ ä¼šåœ¨å¤–å©†å®¶é—¨å‰è·Ÿå®ƒæ­£å¼é“åˆ«", next: "red_good_ending" },
            { text: "è§‰å¾—æœ‰ç‚¹è´Ÿæ‹…ï¼Œå†³å®šæ‚„æ‚„èµ°è¿‘è·¯ç”©å¼€å®ƒ", next: "red_bad_ending" }
          ]
        },
        {
          id: "red_goodbye",
          imageEmoji: "ğŸšª",
          label: "å¤–å©†å®¶é—¨å‰",
          text: "ä½ åœ¨å¤–å©†å®¶é—¨å£åœä¸‹è„šæ­¥ï¼Œå¯¹å¤§ç°ç‹¼è¯´ï¼š\nâ€œè°¢è°¢ä½ é™ªæˆ‘èµ°è¿™ä¸€æ®µï¼Œä¸è¿‡ä»Šå¤©å°±åˆ°è¿™é‡Œã€‚â€\n\nå¤§ç°ç‹¼æ„£äº†ä¸€ä¸‹ï¼Œéšå³è®¤çœŸåœ°ç‚¹å¤´ï¼Œé€€å›åˆ°æ ‘å½±é‡Œï¼Œä¿æŒäº†é‚£ä¸€è‡‚è·ç¦»ã€‚",
          choices: [
            { text: "é¼“èµ·å‹‡æ°”ï¼Œè¯´ä¸€å¥çœŸè¯šçš„æ„Ÿè°¢", next: "red_good_ending" },
            { text: "ä»€ä¹ˆéƒ½ä¸è¯´ï¼Œç›´æ¥è½¬èº«è¿›é—¨", next: "red_bad_ending" }
          ]
        },
        {
          id: "red_danger_flag",
          imageEmoji: "âš ï¸",
          label: "å²”è·¯Â·å¿ƒé‡Œçš„ä¸€æ ¹åˆº",
          text: "ä½ æŠŠçº¦å®šè®°é”™äº†ã€‚å¤§ç°ç‹¼è™½ç„¶æ²¡æœ‰è¯´ä»€ä¹ˆï¼Œä½†ä½ è‡ªå·±åè€Œå˜å¾—éå¸¸ä¸å®‰ã€‚\n\näºæ˜¯ï¼Œä½ å†³å®šï¼š\nâ€œç®—äº†ï¼Œä»Šå¤©å°±ä¸ä¸€èµ·èµ°äº†ã€‚â€\n\næœ‰æ—¶å€™ï¼Œæ²¡å‡†å¤‡å¥½ï¼Œå°±å…ˆä¿ç•™è·ç¦»ï¼Œä¹Ÿæ˜¯å¯¹è‡ªå·±çš„ä¿æŠ¤ã€‚",
          choices: [
            { text: "æ”¹èµ°æœ‰ç¯ç«çš„é‚£æ¡è·¯", next: "red_safe_path" }
          ]
        },
        {
          id: "red_safe_path",
          imageEmoji: "ğŸ¡",
          label: "ç¯ç«äººå®¶",
          text: "ä½ é€‰æ‹©äº†æœ‰ç¯ç«çš„ç»•è¿œè·¯ï¼Œè·¯è¾¹æœ‰å°åº—ã€æœ‰è·¯ç¯ï¼Œè¿˜æœ‰å…¶ä»–æ™šå½’çš„äººã€‚\n\nå¤§ç°ç‹¼åœ¨è¿œå¤„è¿œè¿œåœ°æŒ¥äº†æŒ¥æ‰‹ï¼Œæ²¡æœ‰å†é è¿‘ã€‚\n\nä½ å¹¶æ²¡æœ‰åšé”™ä»€ä¹ˆâ€”â€”åªæ˜¯ä¸ºä»Šå¤©çš„è‡ªå·±ï¼Œé€‰äº†ä¸€æ¡æ›´å®‰å¿ƒçš„è·¯ã€‚",
          isEnding: true,
          endingId: "red_good",
          endingName: "æ²»æ„ˆç»“å±€ï¼šå„è‡ªå¥½å¥½ç”Ÿæ´»",
          textAppend: "\\n\\nã€ç»“å±€å°è®°ã€‘\\nä½ å­¦ä¼šäº†ï¼šç›¸ä¿¡åˆ«äººä¹‹å‰ï¼Œå¯ä»¥å…ˆå­¦ä¼šç›¸ä¿¡è‡ªå·±çš„ç›´è§‰ã€‚"
        },
        {
          id: "red_good_ending",
          imageEmoji: "ğŸ•Šï¸",
          label: "ç»¯çº¢å°è·¯çš„ç»ˆç‚¹",
          isEnding: true,
          endingId: "red_secret",
          endingName: "å·å·å†™ä¿¡çš„ç»“å±€",
          text: "ä½ æ·±å¸ä¸€å£æ°”ï¼Œå¯¹å¤§ç°ç‹¼è¯´ï¼š\nâ€œè°¢è°¢ä½ ä»Šå¤©å®ˆåœ¨é‚£ä¸€è‡‚ä¹‹å¤–ã€‚â€\n\nå¤§ç°ç‹¼ç¬¬ä¸€æ¬¡éœ²å‡ºæœ‰ç‚¹ç¬¨æ‹™çš„ç¬‘ï¼šâ€œé‚£å°±â€¦â€¦ä¸‹æ¬¡è§ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€è‡‚ä¹‹å¤–æ‰“ä¸ªæ‹›å‘¼ã€‚â€\n\nåæ¥ï¼Œä½ å¶å°”ä¼šåœ¨æ£®æ—è·¯å£çœ‹åˆ°ä¸€å°æŠ˜å¾—å¾ˆæ•´é½çš„å°çº¸æ¡ï¼Œä¸Šé¢å†™ç€ï¼š\nâ€œå¸Œæœ›ä½ æ¯æ¬¡èµ°å¤œè·¯ï¼Œéƒ½æœ‰äººåœ¨è¿œå¤„æ›¿ä½ ç•™æ„å‘æ´¼ã€‚â€",
          textAppend: "\\n\\nã€éšè—ç»“å±€ã€‘\\nä½ æ²¡æœ‰å‹‰å¼ºä»»ä½•äººæ”¹å˜ï¼Œåªæ˜¯è½»è½»åœ°æ‰¿è®¤äº†é‚£ä¸€ç‚¹ç‚¹æ¸©æŸ”ã€‚"
        },
        {
          id: "red_bad_ending",
          imageEmoji: "ğŸŒ§ï¸",
          label: "åŒ†å¿™çš„å‘Šåˆ«",
          isEnding: true,
          endingId: "red_bad",
          endingName: "å±é™©ç»“å±€ï¼šæ¥ä¸åŠè¯´çš„è¯",
          text: "ä½ ä»€ä¹ˆéƒ½æ²¡è¯´å°±å…³ä¸Šäº†é—¨ã€‚å¤§ç°ç‹¼çš„å½±å­è¢«é—¨ç¼åˆ‡æˆä¸¤åŠã€‚\n\nä½ å½“ç„¶æ˜¯å®‰å…¨çš„ï¼Œåªæ˜¯å¤œé‡Œå¶å°”ä¼šæƒ³èµ·é‚£å¥æ²¡è¯´å‡ºå£çš„â€œè°¢è°¢â€ã€‚\n\nã€ç»“å±€å°è®°ã€‘\næœ‰æ—¶å€™æˆ‘ä»¬ä¸æ˜¯ä¼¤å®³äº†è°ï¼Œè€Œæ˜¯é”™è¿‡äº†ä¸€æ¬¡å®Œæ•´åœ°é“åˆ«ã€‚ä¸‹æ¬¡æˆ–è®¸å¯ä»¥è¯•ç€æ…¢ä¸€ç‚¹ï¼Œè¯´å®Œå¿ƒé‡Œè¯ã€‚"
        }
      ]
    },

    snow: {
      id: "snow",
      emoji: "ğŸ",
      title: "é•œä¸­ç™½é›ªåŸçš„é‚€è¯·",
      tagline: "å…³äºè‡ªæˆ‘å®¡è§†ã€æ»¤é•œå’ŒçœŸå®çš„å–œæ¬¢ã€‚",
      label: "ç™½é›ªå…¬ä¸»çº¿",
      themeLabel: "é­”é•œä¹‹åŸ",
      endingsMeta: [
        { id: "snow_good", name: "çœŸè¯šç»“å±€" },
        { id: "snow_bad", name: "æ»¤é•œè¿‡è½½ç»“å±€" },
        { id: "snow_secret", name: "åšè‡ªå·±å…¬ä¸»ç»“å±€" }
      ],
      scenes: [
        {
          id: "snow_intro",
          isStart: true,
          branchTitle: "æ™®é€šå¼€å±€ï¼šæ”¶åˆ°é­”é•œ App é‚€è¯·",
          branchNote: "ä»ä¸€æ¬¾ç¥ç§˜çš„â€œé­”é•œæ»¤é•œâ€å¼€å§‹ï¼Œå†³å®šè¦ä¸è¦ç”¨å®ƒæ”¹å˜è‡ªå·±ã€‚",
          imageEmoji: "ğŸ“±",
          label: "åŸå ¡Â·ä¿¡æ¯æç¤º",
          text: "ä½ æ”¶åˆ°ä¸€æ¡æ¨é€ï¼š\nã€Œé­”é•œÂ·beta å†…æµ‹èµ„æ ¼å·²å¼€é€šï¼šåªéœ€ä¸Šä¼ è‡ªæ‹ï¼Œå³å¯ç”Ÿæˆâ€˜å…¨åŸæœ€ç¾ç‰ˆæœ¬çš„ä½ â€™ã€‚ã€\n\næ®è¯´ï¼Œè¿™æ¬¾ App çš„ç®—æ³•ï¼Œæ­£æ˜¯ä¼ è¯´ä¸­â€œé­”é•œâ€çš„ç°ä»£å‡çº§ç‰ˆã€‚",
          choices: [
            { text: "å¥½å¥‡ä¸‹è½½å®‰è£…è¯•è¯•", next: "snow_install" },
            { text: "è§‰å¾—æ€ªæ€ªçš„ï¼Œå…ˆé—®é—®é—ºèœœæ„è§", next: "snow_friend" }
          ]
        },
        {
          id: "snow_install",
          imageEmoji: "ğŸª",
          label: "é­”é•œæ»¤é•œ",
          miniGame: {
            type: "quiz",
            title: "å°å…³å¡ï¼šä½ å¸Œæœ›æ»¤é•œåšä»€ä¹ˆï¼Ÿ",
            hint: "æ¯ä¸ªé€‰é¡¹éƒ½ä»£è¡¨äº†ä½ å¯¹â€œå˜å¥½çœ‹â€çš„ä¸åŒæœŸå¾…ã€‚",
            question: "å¦‚æœåªèƒ½é€‰æ‹©ä¸€æ¡ï¼Œä½ æœ€å¸Œæœ›é­”é•œå¸®ä½ ï¼š",
            options: [
              { text: "æŠŠæ‰€æœ‰â€œç¼ºç‚¹â€éƒ½ç£¨å¹³ï¼Œåªç•™ä¸‹å®Œç¾ä¾§è„¸", next: "snow_perfect" },
              { text: "ç¨å¾®æäº®è‚¤è‰²ã€æ·¡æ·¡ä¿®é¥°é»‘çœ¼åœˆå°±å¥½", next: "snow_soft" },
              { text: "ä¸è¦æ”¹å˜äº”å®˜ï¼Œåªæ˜¯è°ƒæˆä½ å–œæ¬¢çš„è‰²è°ƒ", next: "snow_soft" }
            ]
          },
          choices: []
        },
        {
          id: "snow_friend",
          imageEmoji: "ğŸ‘­",
          label: "å¥½å‹ç¾¤èŠ",
          text: "é—ºèœœåœ¨ç¾¤é‡Œåˆ·åˆ·åˆ·åœ°å‘è¯­éŸ³ï¼š\nâ€œä½ å·²ç»å¾ˆå¥½çœ‹äº†å•¦ï¼Œæˆ‘æ¯”è¾ƒæ‹…å¿ƒï¼Œè¿™ä¸ªç®—æ³•ä¼šä¸ä¼šè®©å¤§å®¶éƒ½é•¿å¾—ä¸€æ ·ã€‚â€\n\nå¥¹å‘æ¥ä¸€å¼ å›¾ï¼šä¹å®«æ ¼è‡ªæ‹ï¼Œä¹ä¸ªäººçš„è„¸å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯å‘è‰²ä¸åŒã€‚",
          choices: [
            { text: "å†³å®šè°¨æ…ä¸€ç‚¹ï¼Œåªç”¨è½»æ»¤é•œ", next: "snow_soft" },
            { text: "è¿˜æ˜¯æƒ³è¯•è¯•â€œå…¨åŸæœ€ç¾â€ç‰ˆæœ¬", next: "snow_perfect" }
          ]
        },
        {
          id: "snow_soft",
          imageEmoji: "â„ï¸",
          label: "æŸ”å…‰é‡Œçš„è‡ªå·±",
          text: "ä½ é€‰æ‹©äº†æœ€è½»çš„æ»¤é•œã€‚ç…§ç‰‡é‡Œçš„ä½ ï¼Œè¿˜æ˜¯ä½ ï¼Œåªæ˜¯é»‘çœ¼åœˆæ·¡äº†ä¸€ç‚¹ï¼ŒèƒŒæ™¯å˜æˆäº†ç»†é›ªé£˜è½çš„ç»ç’ƒçª—ã€‚\n\nä½ æŠŠè¿™å¼ ç…§ç‰‡å‘ç»™äº†å–œæ¬¢çš„äººï¼Œå¯¹æ–¹å›äº†ä¸€ä¸ªç®€å•å´çœŸè¯šçš„å›å¤ï¼šâ€œå¥½åƒçœ‹åˆ°ä½ åœ¨å†¬å¤©é‡Œç¬‘ã€‚â€",
          choices: [
            { text: "ç»§ç»­ç”¨è¿™å¼ å¤´åƒï¼Œä¸å†çº ç»“", next: "snow_good_ending" },
            { text: "çªç„¶æœ‰ç‚¹ä¸Šå¤´ï¼Œæƒ³æŒ‘æˆ˜æ›´å¼ºæ»¤é•œ", next: "snow_perfect" }
          ]
        },
        {
          id: "snow_perfect",
          imageEmoji: "ğŸ",
          label: "æœ€ç¾ç‰ˆæœ¬ï¼Ÿ",
          text: "é­”é•œ App è¿è½¬èµ·æ¥ï¼Œè¿›åº¦æ¡æ‹‰åˆ° 100%ã€‚\n\nå±å¹•ä¸Šçš„ä½ ï¼Œçš®è‚¤åƒæŠ›å…‰è¿‡çš„ç“·ï¼Œçœ¼ç›æ¯”å¹³æ—¶å¤§äº†ä¸€åœˆï¼Œä¸‹å·´å°–å¾—åƒè½åœ¨æ¡Œä¸Šçš„è‹¹æœæŸ„ã€‚\n\nç‚¹èµèœ‚æ‹¥è€Œè‡³ï¼Œä½†ä½ çœ‹ç€é‚£å¼ è„¸ï¼Œæ€»è§‰å¾—æœ‰ç‚¹é™Œç”Ÿã€‚",
          miniGame: {
            type: "inputCode",
            title: "å°å…³å¡ï¼šåå‘é­”å’’",
            hint: "å¦‚æœä½ å¿ƒé‡Œæ›´æƒ³â€œåšå›è‡ªå·±â€ï¼Œè¯•ç€åœ¨ä¸‹é¢è¾“å…¥ä¸€ä¸ªå°å°å’’è¯­ã€‚",
            placeholder: "è¾“å…¥å’’è¯­ï¼Œæ¯”å¦‚ï¼šjust me",
            solution: "just me",
            successNext: "snow_secret_ending",
            failNext: "snow_bad_ending"
          },
          choices: []
        },
        {
          id: "snow_good_ending",
          imageEmoji: "ğŸ°",
          label: "å†¬æ—¥åŸå ¡çª—å°",
          isEnding: true,
          endingId: "snow_good",
          endingName: "çœŸè¯šç»“å±€ï¼šæŸ”å…‰é‡Œçš„ä½ ",
          text: "ä½ ä¿ç•™äº†é‚£å¼ åªæ˜¯ç•¥å¾®ä¿®é¥°è¿‡çš„ç…§ç‰‡ï¼Œä¹Ÿä¿ç•™äº†é•œå­é‡ŒçœŸå®çš„è‡ªå·±ã€‚\n\næœ‰æ—¶å€™ï¼Œè¢«çœ‹è§çš„ä¸æ˜¯â€œæœ€å®Œç¾â€çš„è„¸ï¼Œè€Œæ˜¯ä½ é‚£ä¸€åˆ»çœŸå¿ƒçš„ç¥æƒ…ã€‚",
          textAppend: "\\n\\nã€ç»“å±€å°è®°ã€‘\\nä½ å­¦ä¼šäº†ï¼šå·¥å…·å¯ä»¥é”¦ä¸Šæ·»èŠ±ï¼Œä½†ä¸è¯¥æ›¿ä½ å†³å®šâ€œä½ æ˜¯è°â€ã€‚"
        },
        {
          id: "snow_bad_ending",
          imageEmoji: "ğŸ“µ",
          label: "æ»¤é•œè¿‡è½½",
          isEnding: true,
          endingId: "snow_bad",
          endingName: "æ»¤é•œè¿‡è½½ç»“å±€",
          text: "ä½ æ²¡æœ‰åœä¸‹ï¼Œåå¤å åŠ æ»¤é•œã€‚æ¯æ¬¡çœ‹åˆ°æ¯”ä¸Šä¸€ç‰ˆæ›´â€œå®Œç¾â€çš„è‡ªå·±ï¼Œå°±æ›´éš¾æ¥å—é•œå­ä¸­çš„é‚£å¼ è„¸ã€‚\n\nç›´åˆ°æœ‰ä¸€å¤©ï¼Œä½ å¹²è„†ä¸å†çœ‹é•œå­ï¼Œåªçœ‹å±å¹•ã€‚",
          textAppend: "\\n\\nã€ç»“å±€å°è®°ã€‘\\nè¿™ä¸æ˜¯å¤±è´¥ï¼Œè€Œæ˜¯ä¸€ä¸ªæé†’ï¼šå½“å·¥å…·å¼€å§‹åå‘æ§åˆ¶æƒ…ç»ªï¼Œä¹Ÿè®¸å¯ä»¥æŒ‰ä¸‹æš‚åœé”®ï¼Œé‡æ–°è®¾å®šè¾¹ç•Œã€‚"
        },
        {
          id: "snow_secret_ending",
          imageEmoji: "ğŸŒ¨ï¸",
          label: "åšè‡ªå·±å…¬ä¸»",
          isEnding: true,
          endingId: "snow_secret",
          endingName: "åšè‡ªå·±å…¬ä¸»ç»“å±€",
          text: "ä½ åœ¨è¾“å…¥æ¡†é‡Œæ‰“ä¸‹é‚£å¥â€œjust meâ€ã€‚\n\nå¥‡æ€ªçš„æ˜¯ï¼ŒApp ç•Œé¢çªç„¶æš—äº†å‡ ç§’ï¼Œæ»¤é•œä»ä½ è„¸ä¸Šç¼“ç¼“é€€å»ï¼Œåªç•™ä¸‹çª—å¤–é£˜è½çš„é›ªå’Œä½ çœŸå®çš„ç¬‘ã€‚\n\nç³»ç»Ÿæ¨é€äº†ä¸€æ¡åªæœ‰ä½ èƒ½çœ‹åˆ°çš„æ¶ˆæ¯ï¼š\nâ€œæ­å–œè§£é”éšè—æˆå°±ï¼šåœ¨æ‰€æœ‰ç‰ˆæœ¬çš„è‡ªå·±ä¹‹ä¸­ï¼Œæœ€å–œæ¬¢å½“ä¸‹è¿™ä¸€ç‰ˆã€‚â€"
        }
      ]
    },

    tower: {
      id: "tower",
      emoji: "ğŸŒŸ",
      title: "å¡”é¡¶æ˜Ÿå…‰ä¿¡ä½¿",
      tagline: "å…³äºå‘å¤–æ±‚åŠ©ï¼Œä¹Ÿå…³äºå‘å†…è¯´è¯ã€‚",
      label: "é•¿å‘å…¬ä¸»çº¿",
      themeLabel: "å¤œç©ºé«˜å¡”",
      endingsMeta: [
        { id: "tower_good", name: "ä¸‹å¡”ç»“å±€" },
        { id: "tower_bad", name: "ç»§ç»­ç‹¬è‡ªç»“å±€" },
        { id: "tower_secret", name: "æ˜Ÿå…‰å¹¿æ’­ç»“å±€" }
      ],
      scenes: [
        {
          id: "tower_intro",
          isStart: true,
          branchTitle: "æ™®é€šå¼€å±€ï¼šä½åœ¨é«˜å¡”çš„â€œç¤¾æä¸»æ’­â€",
          branchNote: "ä½ æœ‰ä¸€å¤´ä¼šè‡ªåŠ¨æ‰“ç»“çš„é•¿å‘ï¼Œè¿˜æœ‰ä¸€å°å·å·è¿åˆ°å¤–é¢çš„æ‰‹æœºã€‚",
          imageEmoji: "ğŸ°",
          label: "å¡”é¡¶æˆ¿é—´",
          text: "ä½ ä½åœ¨ä¸€åº§é«˜å¡”çš„æœ€é¡¶å±‚ï¼Œæ‰€æœ‰äººéƒ½ä»¥ä¸ºä½ å®³æ€•å¤–é¢çš„ä¸–ç•Œã€‚\n\nåªæœ‰ä½ è‡ªå·±çŸ¥é“ï¼Œå…¶å®ä½ åªæ˜¯â€¦â€¦å¾ˆæ‡’å¾—è§£é‡Šé‚£ä¹ˆå¤šã€‚\n\næ™šä¸Šï¼Œä½ ä¼šå·å·æ‰“å¼€ä¸€å°å°å°çš„ç›´æ’­è®¾å¤‡ï¼Œå¯¹ç€æ˜Ÿç©ºè¯´è¯ã€‚æ²¡æœ‰è§‚ä¼—çš„æ—¶å€™ï¼Œå°±å½“åœ¨å†™æ—¥è®°ã€‚",
          choices: [
            { text: "è¯•ç€æŠŠç›´æ’­é—´æ ‡é¢˜æ”¹æˆæ›´è¯šå®ä¸€ç‚¹çš„", next: "tower_title" },
            { text: "ä¿æŒç¥ç§˜é£æ ¼ï¼Œåªè®²å†·ç¬‘è¯", next: "tower_cold" }
          ]
        },
        {
          id: "tower_title",
          imageEmoji: "ğŸ“¡",
          label: "æ˜Ÿå…‰ç›´æ’­é—´",
          miniGame: {
            type: "quiz",
            title: "å°å…³å¡ï¼šç»™å¡”é¡¶ç”µå°èµ·ä¸ªåå­—",
            hint: "é€‰ä¸€ä¸ªä½ çœŸå¿ƒæ„¿æ„è¯´å‡ºå£çš„æ ‡é¢˜ã€‚",
            question: "ä»Šæ™šçš„ç›´æ’­é—´æ ‡é¢˜ï¼Œä½ æ›´æƒ³ç”¨ï¼š",
            options: [
              { text: "ã€Œä»€ä¹ˆéƒ½ä¸æƒ³è§£é‡Šç”µå°ã€", next: "tower_real" },
              { text: "ã€Œå¡”é¡¶ç¥ç§˜å¥³ä¸»æ’­åœ¨çº¿è§£å¿§ã€", next: "tower_cold" },
              { text: "ã€Œåªæ˜¯æƒ³è¯´ç‚¹åºŸè¯ã€", next: "tower_real" }
            ]
          },
          choices: []
        },
        {
          id: "tower_cold",
          imageEmoji: "ğŸ˜¶â€ğŸŒ«ï¸",
          label: "åªæœ‰é£åœ¨ç¬‘",
          text: "ä½ ç»§ç»­ç”¨å¾ˆé…·å¾ˆç¥ç§˜çš„æ–¹å¼è®²å†·ç¬‘è¯ï¼Œè§‚ä¼—æ•°ä¸€ç›´åœç•™åœ¨â€œ1â€ã€‚\n\né‚£ä¸ªâ€œ1â€å…¶å®æ˜¯ä½ è‡ªå·±å¼€çš„å°é©¬ç”²è´¦å·ã€‚",
          choices: [
            { text: "çªç„¶å¥½æƒ³è¯´ç‚¹çœŸå¿ƒè¯", next: "tower_real" },
            { text: "ç®—äº†ï¼Œå…³æ‰ç›´æ’­ç¡è§‰", next: "tower_bad_ending" }
          ]
        },
        {
          id: "tower_real",
          imageEmoji: "ğŸŒŒ",
          label: "è®¤çœŸè¯´è¯çš„å¤œæ™š",
          text: "ä½ æ·±å¸ä¸€å£æ°”ï¼Œç¬¬ä¸€æ¬¡åœ¨ç›´æ’­é—´é‡Œè¯´ï¼š\nâ€œå…¶å®æˆ‘æ˜¯æœ‰ç‚¹æ€•ä¸‹å¡”çš„ï¼Œåªè¦ä¸€æƒ³åˆ°è¦è§£é‡Šè‡ªå·±ï¼Œå°±ä¼šè§‰å¾—å¾ˆç´¯ã€‚â€\n\nå¥‡å¦™çš„æ˜¯ï¼Œè§‚ä¼—æ•°ä» 1 å˜æˆäº† 3ã€5ã€8â€¦â€¦æœ‰äººæ‰“å­—è¯´ï¼š\nâ€œæˆ‘ä¹Ÿæ˜¯ã€‚â€",
          choices: [
            { text: "ç»§ç»­è¯´ä¸‹å»ï¼ŒæŠŠçœŸå®çš„çƒ¦æ¼è®²å®Œ", next: "tower_good_ending" },
            { text: "å¿½ç„¶æ…Œäº†ï¼Œæƒ³å‡è£…åˆšåˆšéƒ½æ˜¯èŠ‚ç›®æ•ˆæœ", next: "tower_secret_ending" }
          ]
        },
        {
          id: "tower_good_ending",
          imageEmoji: "ğŸªœ",
          label: "ä¸‹å¡”çš„ç¬¬ä¸€æ­¥",
          isEnding: true,
          endingId: "tower_good",
          endingName: "ä¸‹å¡”ç»“å±€",
          text: "ä½ æ²¡æœ‰è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œåªæ˜¯ç¬¬ä¸€æ¬¡æŠŠå®ƒä»¬è®²å‡ºæ¥ã€‚\n\nç¬¬äºŒå¤©ï¼Œä½ å‘ç°å¡”ä¸‹å¤šäº†ä¸€æŠŠæ¢¯å­ï¼Œæ˜¯æœ‰äººå¸®ä½ æ­å¥½çš„â€”â€”ä¸æ˜¯ä¸ºäº†â€œæ•‘ä½ â€ï¼Œè€Œæ˜¯å†™äº†å¼ çº¸æ¡ï¼š\nâ€œæƒ³ä¸‹æ¥çš„æ—¶å€™ï¼Œå¯ä»¥æ…¢æ…¢èµ°ã€‚â€"
        },
        {
          id: "tower_bad_ending",
          imageEmoji: "ğŸ›ï¸",
          label: "ç»§ç»­ç‹¬è‡ªç»“å±€",
          isEnding: true,
          endingId: "tower_bad",
          endingName: "ç»§ç»­ç‹¬è‡ªç»“å±€",
          text: "ä½ åˆä¸Šç›´æ’­è®¾å¤‡ï¼Œé‡æ–°å›åˆ°å®Œå…¨å®‰é™çš„å¡”é¡¶æˆ¿é—´ã€‚\n\nè¿™å¹¶ä¸æ„å‘³ç€ä½ é”™äº†ï¼Œåªæ˜¯è¿™ä¸€æ™šï¼Œä½ é€‰æ‹©äº†æŠŠè¯ç•™åœ¨å¿ƒé‡Œã€‚",
          textAppend: "\\n\\nã€ç»“å±€å°è®°ã€‘\\næœ‰æ—¶å€™æ²‰é»˜ä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©ã€‚çœŸæ­£é‡è¦çš„æ˜¯ï¼šå½“ä½ å‡†å¤‡å¥½æ—¶ï¼Œè¦çŸ¥é“â€œå¯ä»¥æœ‰äººå¬ä½ è¯´â€ã€‚"
        },
        {
          id: "tower_secret_ending",
          imageEmoji: "ğŸ“»",
          label: "æ˜Ÿå…‰å¹¿æ’­",
          isEnding: true,
          endingId: "tower_secret",
          endingName: "æ˜Ÿå…‰å¹¿æ’­ç»“å±€",
          text: "ä½ ç´§å¼ åˆ°æƒ³å¼€ç©ç¬‘åœ†å›æ¥ï¼Œå´çªç„¶çœ‹åˆ°å¼¹å¹•åˆ·èµ·ï¼š\nâ€œåˆšåˆšé‚£æ®µä¸ç”¨åˆ ï¼Œæœ‰ç‚¹åƒæˆ‘ä»¬è‡ªå·±çš„å¿ƒé‡Œè¯ã€‚â€\n\näºæ˜¯ä½ ç´¢æ€§æŠŠç›´æ’­é—´æ”¹åä¸ºâ€”â€”\nã€Œå¡”é¡¶æ˜Ÿå…‰ä¿¡ä½¿ï¼šå¸®å¤§å®¶æŠŠä¸æ•¢è¯´çš„è¯ï¼Œå…ˆå¯„ç»™æ˜Ÿæ˜Ÿã€‚ã€\n\nä½ ä»ç„¶ä½åœ¨å¡”é¡¶ï¼Œä½†ä¸å†æ˜¯ä¸€ä¸ªäººã€‚"
        }
      ]
    },

    candy: {
      id: "candy",
      emoji: "ğŸ¬",
      title: "ç³–æœæ£®æ—çš„é€ƒè„±æ¸…å•",
      tagline: "å…³äºè§„åˆ’ã€è¡¥ç»™å’Œâ€œä¸è¦åªé è¿æ°”â€ã€‚",
      label: "æ±‰å¡å°”ä¸æ ¼è•¾ç‰¹çº¿",
      themeLabel: "ç³–å±‹è¿·å®«",
      endingsMeta: [
        { id: "candy_good", name: "æˆåŠŸé€ƒè„±" },
        { id: "candy_bad", name: "ä½“åŠ›é€æ”¯" },
        { id: "candy_secret", name: "æˆä¸ºå…³å¡è®¾è®¡å¸ˆ" }
      ],
      scenes: [
        {
          id: "candy_intro",
          isStart: true,
          branchTitle: "æ™®é€šå¼€å±€ï¼šè¢«ç³–æœå±‹å›°ä½çš„ä¸€å¤©",
          branchNote: "è¦é€ƒå‡ºæ£®æ—ï¼Œä½ ä»¬éœ€è¦è®¤çœŸç®—ä¸€ç®—â€œä½“åŠ›â€å’Œâ€œç³–æœâ€ã€‚",
          imageEmoji: "ğŸšï¸",
          label: "ç³–æœå±‹é—¨å£",
          text: "ä½ å’Œæ±‰å¡å°”ç«™åœ¨ä¸€åº§æ¼‚äº®åˆ°æœ‰ç‚¹å¯ç–‘çš„ç³–æœå±‹å‰ã€‚\n\nä½ ä»¬çš„å£è¢‹é‡Œï¼Œä¸€å…±æœ‰ 12 é¢—ç³–ï¼Œè¿™å°±æ˜¯ä»Šæ™šé€ƒè·‘çš„å…¨éƒ¨ä½“åŠ›æ¥æºã€‚",
          choices: [
            { text: "ä¸¥è‚ƒå¼€ä¼šï¼šå…ˆåšä¸€ä»½é€ƒè„±é¢„ç®—", next: "candy_plan" },
            { text: "å…ˆåƒä¸¤é¢—ç³–å‹æƒŠå†è¯´", next: "candy_risk" }
          ]
        },
        {
          id: "candy_plan",
          imageEmoji: "ğŸ“‹",
          label: "é€ƒè„±è®¡åˆ’è¡¨",
          miniGame: {
            type: "quiz",
            title: "å°å…³å¡ï¼šä½“åŠ›é¢„ç®—",
            hint: "ç®€å•ç®—ä¸€ç®—ï¼šåˆ«è®©ä½“åŠ›åœ¨åŠè·¯è§åº•ã€‚",
            question: "ä½ ä»¬é¢„è®¡ä»Šæ™šè¦è·‘ 3 æ®µè·¯ï¼Œæ¯æ®µè‡³å°‘è¦èŠ± 3 ç‚¹ä½“åŠ›ã€‚12 é¢—ç³–é‡Œï¼Œæœ€å¤šèƒ½æµªè´¹å‡ é¢—ï¼Ÿ",
            options: [
              { text: "0 é¢—ï¼šå…¨éƒ¨ç”¨äºè·‘è·¯", next: "candy_safe" },
              { text: "3 é¢—ï¼šè¿˜èƒ½å‹‰å¼ºæ’‘ä½", next: "candy_safe" },
              { text: "6 é¢—ï¼šåæ­£è¿æ°”ä¼šå¸®å¿™", next: "candy_bad_ending" }
            ]
          },
          choices: []
        },
        {
          id: "candy_risk",
          imageEmoji: "ğŸ¤¤",
          label: "å…ˆåƒä¸¤é¢—å†è¯´",
          text: "ä½ ä»¬å½“åœºåƒæ‰äº† 2 é¢—ç³–ï¼Œè§‰å¾—å¿ƒæƒ…å¥½å¤šäº†ã€‚\n\nåªæ˜¯ï¼Œå£è¢‹æ˜æ˜¾å˜è½»äº†ã€‚",
          choices: [
            { text: "æ„è¯†åˆ°ä¸å¯¹åŠ²ï¼Œèµ¶ç´§å¼€å§‹ç®—è´¦", next: "candy_plan" },
            { text: "è§‰å¾—æ²¡å…³ç³»ï¼Œå†åƒä¸€é¢—", next: "candy_bad_ending" }
          ]
        },
        {
          id: "candy_safe",
          imageEmoji: "ğŸšª",
          label: "å¤œè‰²é‡Œå‡ºå‘",
          text: "ä½ ä»¬è®¤çœŸè®°ä¸‹äº†ï¼š\n- æ¯è·‘ä¸€æ®µè·¯ï¼Œå…ˆè¡¥ 1 é¢—ç³–ï¼›\n- ä¿åº•ç•™ 3 é¢—ç³–ï¼Œå“ªæ€•å†é¦‹ä¹Ÿä¸åƒã€‚\n\né€ƒè·‘è¿™ä»¶äº‹ï¼Œç»ˆäºä¸å†åªé â€œå¥½è¿æ°”â€ã€‚",
          choices: [
            { text: "æŒ‰ç…§è®¡åˆ’æ‰§è¡Œï¼Œæ…¢æ…¢è·‘å‡ºå»", next: "candy_good_ending" },
            { text: "åŠè·¯çœ‹åˆ°æ–°çš„ç³–å±‹å¹¿å‘Šç‰Œï¼Œæƒ³å»æ¢é™©", next: "candy_secret_ending" }
          ]
        },
        {
          id: "candy_good_ending",
          imageEmoji: "ğŸŒ²",
          label: "æˆåŠŸé€ƒè„±",
          isEnding: true,
          endingId: "candy_good",
          endingName: "æˆåŠŸé€ƒè„±",
          text: "ä½ ä»¬åœ¨æœ€åä¸€æ®µè·¯æ„Ÿè§‰åˆ°æœ‰ç‚¹ç´¯ï¼Œä½†å£è¢‹é‡Œåˆšå¥½è¿˜å‰© 3 é¢—ç³–â€”â€”\n\nâ€œåŸæ¥æå‰ç®—å¥½çš„å®‰å…¨å«ï¼Œæ˜¯çœŸçš„ä¼šç”¨ä¸Šçš„ã€‚â€\n\nä½ ä»¬æˆåŠŸè·‘å‡ºäº†ç³–æœæ£®æ—ã€‚"
        },
        {
          id: "candy_bad_ending",
          imageEmoji: "ğŸ¥µ",
          label: "ä½“åŠ›é€æ”¯",
          isEnding: true,
          endingId: "candy_bad",
          endingName: "ä½“åŠ›é€æ”¯",
          text: "åŠè·¯ä¸Šï¼Œä½ ä»¬å‘ç°ç³–ç«Ÿç„¶å…¨åƒå…‰äº†ã€‚\n\nä½“åŠ›åœ¨æœ€åä¸€æ®µè·¯çªç„¶è§åº•ï¼Œåªèƒ½ååœ¨åœ°ä¸Šå–˜æ°”ï¼Œç­‰åˆ°å¤©äº®å†æƒ³åŠæ³•ã€‚",
          textAppend: "\\n\\nã€ç»“å±€å°è®°ã€‘\\nå€’ä¹Ÿä¸æ˜¯ä¸–ç•Œæœ«æ—¥ï¼Œåªæ˜¯æé†’æˆ‘ä»¬ï¼šä¸‹æ¬¡åšè®¡åˆ’æ—¶ï¼Œä¸è¦æŠŠâ€œè¿æ°”â€å†™æˆä¸»è¦ç­–ç•¥ã€‚"
        },
        {
          id: "candy_secret_ending",
          imageEmoji: "ğŸ•¹ï¸",
          label: "æˆä¸ºå…³å¡è®¾è®¡å¸ˆ",
          isEnding: true,
          endingId: "candy_secret",
          endingName: "æˆä¸ºå…³å¡è®¾è®¡å¸ˆ",
          text: "ä½ ä»¬é¡ºåˆ©é€ƒå‡ºå»ä»¥åï¼ŒæŠŠè¿™æ®µç»å†åšæˆäº†ä¸€æ¬¾å°å°çš„æ‰‹æœºæ¸¸æˆï¼š\nã€Šç³–æœæ£®æ—é€ƒè„±è®°ï¼šè¯·å…ˆç®—å¥½ä½“åŠ›ã€‹ã€‚\n\nè¯„åˆ†å¾ˆé«˜ï¼Œå› ä¸ºå¤§å®¶çªç„¶å‘ç°ï¼š\nâ€œåŸæ¥è®¤çœŸåšé¢„ç®—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€åœºå¥½ç©çš„é—¯å…³ã€‚â€"
        }
      ]
    },

    sleep: {
      id: "sleep",
      emoji: "â°",
      title: "ç¡ç¾äººçš„é—¹é’Ÿ App",
      tagline: "å…³äºä¼‘æ¯ã€è´ªç¡å’ŒæŒæ§èŠ‚å¥ã€‚",
      label: "ç¡ç¾äººçº¿",
      themeLabel: "æ—¶é—´é­”æ³•",
      endingsMeta: [
        { id: "sleep_good", name: "èŠ‚å¥æŒæ§" },
        { id: "sleep_bad", name: "æ— é™è´ªç¡" },
        { id: "sleep_secret", name: "å‘¨æœ«æ¨¡å¼" }
      ],
      scenes: [
        {
          id: "sleep_intro",
          isStart: true,
          branchTitle: "æ™®é€šå¼€å±€ï¼šä¸‰ç™¾å¹´æ²¡å…³è¿‡é—¹é’Ÿ",
          branchNote: "ä¸€æ¬¾ç¥å¥‡ Appï¼Œè®©ä½ é‡æ–°è®¾å®šâ€œä»€ä¹ˆæ—¶å€™é†’â€ã€‚",
          imageEmoji: "ğŸ˜´",
          label: "æ²‰ç¡çš„æˆ¿é—´",
          text: "ä¼ è¯´ä¸­çš„ç¡ç¾äººå…¶å®å¹¶æ²¡æœ‰è¢«ç‹å­å«é†’ï¼Œè€Œæ˜¯è¢«ä¸€æ¬¾å«åšã€ŠWakeUp+ã€‹çš„é—¹é’Ÿ App è½»è½»éœ‡é†’ã€‚\n\nä½ å°±æ˜¯é‚£ä½ç¡ç¾äººï¼Œç°åœ¨æ­£èººåœ¨åºŠä¸Šï¼Œçœ‹ç€æ‰‹æœºé‡Œçš„èµ·åºŠæ—¶é—´ã€‚",
          choices: [
            { text: "è®¤çœŸè®¾ç½®ä¸€ä¸ªå¯¹è‡ªå·±å‹å¥½çš„èµ·åºŠæ—¶é—´", next: "sleep_set" },
            { text: "ç›´æ¥ç‚¹â€œå·¥ä½œæ—¥ 7:00 å…¨éƒ¨å¯ç”¨â€", next: "sleep_hard" }
          ]
        },
        {
          id: "sleep_set",
          imageEmoji: "ğŸ“…",
          label: "æ¸©æŸ”èµ·åºŠè®¡åˆ’",
          miniGame: {
            type: "slider",
            title: "å°å…³å¡ï¼šæ‰¾ä¸€ä¸ªä½ çœŸå¿ƒæ„¿æ„èµ·åºŠçš„æ—¶é—´",
            hint: "æ‹–åŠ¨æ»‘å—ï¼Œé€‰æ‹©ä½ èƒ½æ¥å—çš„èµ·åºŠæ—¶é—´ï¼ˆ6 ç‚¹åˆ° 10 ç‚¹ï¼‰ã€‚7:30â€“8:30 æ˜¯â€œæ¸©æŸ”é»„é‡‘åŒºâ€ã€‚",
            min: 6,
            max: 10,
            step: 0.5,
            successRange: [7.5, 8.5],
            successNext: "sleep_good_ending",
            failNext: "sleep_secret_ending"
          },
          choices: []
        },
        {
          id: "sleep_hard",
          imageEmoji: "ğŸ“²",
          label: "æš´åŠ›é—¹é’Ÿ",
          text: "ä½ é€‰æ‹©äº†â€œå·¥ä½œæ—¥æ¯å¤© 7:00 å‡†æ—¶å“é“ƒï¼Œä¸”ä¸å¯è·³è¿‡â€ã€‚\n\nç³»ç»Ÿå‹å¥½åœ°æé†’ä½ ï¼š\nâ€œå¦‚æœè¿ç»­ä¸‰æ¬¡å¼ºåˆ¶å…³é—­é—¹é’Ÿï¼Œå°†è‡ªåŠ¨è¿›å…¥â€˜åå›æ¨¡å¼â€™ã€‚â€",
          choices: [
            { text: "è§‰å¾—æœ‰ç‚¹å¯æ€•ï¼Œå›å»é‡æ–°è®¾ç½®", next: "sleep_set" },
            { text: "æ— è§†æé†’ï¼Œç›´æ¥ä¿å­˜", next: "sleep_bad_ending" }
          ]
        },
        {
          id: "sleep_good_ending",
          imageEmoji: "ğŸŒ…",
          label: "èŠ‚å¥æŒæ§",
          isEnding: true,
          endingId: "sleep_good",
          endingName: "èŠ‚å¥æŒæ§",
          text: "ä½ æŠŠèµ·åºŠæ—¶é—´è°ƒåœ¨äº†â€œæ¸©æŸ”é»„é‡‘åŒºâ€ï¼Œå¹¶ç»™è‡ªå·±ç•™äº† 10 åˆ†é’Ÿçš„å‘å‘†ç¼“å†²åŒºã€‚\n\nè¿™ä¸€åˆ»ï¼Œä½ ä¸æ˜¯è¢«ä¸–ç•Œå«é†’ï¼Œè€Œæ˜¯å’Œä¸–ç•Œçº¦å¥½ï¼Œä¸€ä¸ªåŒæ–¹éƒ½èˆ’æœçš„æ—¶é—´ã€‚"
        },
        {
          id: "sleep_bad_ending",
          imageEmoji: "ğŸ”",
          label: "æ— é™è´ªç¡",
          isEnding: true,
          endingId: "sleep_bad",
          endingName: "æ— é™è´ªç¡",
          text: "ç¬¬ä¸‰æ¬¡å¼ºåˆ¶å…³æ‰é—¹é’Ÿåï¼ŒApp é»˜é»˜å¼€å¯äº†â€œåå›æ¨¡å¼â€ï¼š\n\nâ€”â€”ä»æ­¤ä»¥åï¼Œåªè¦ä½ æƒ³ç¡ï¼Œå®ƒå°±å†ä¹Ÿä¸ä¼šå“äº†ã€‚\n\nä½ å½“ç„¶ç¡å¾—å¾ˆçˆ½ï¼Œä½†ç™½å¤©ä¹Ÿå¸¸å¸¸åœ¨æƒ³ï¼šè¦ä¸è¦é‡æ–°è£…å›é‚£ä¸ªå¯ä»¥å•†é‡çš„é—¹é’Ÿã€‚"
        },
        {
          id: "sleep_secret_ending",
          imageEmoji: "ğŸ“†",
          label: "å‘¨æœ«æ¨¡å¼",
          isEnding: true,
          endingId: "sleep_secret",
          endingName: "å‘¨æœ«æ¨¡å¼",
          text: "ä½ æ²¡æœ‰å®Œå…¨å‘½ä¸­â€œé»„é‡‘åŒºâ€ï¼Œä½†ä½ è®¤çœŸæƒ³è¿‡è‡ªå·±çœŸæ­£éœ€è¦å¤šå°‘ç¡çœ ã€‚\n\nApp å› æ­¤ç»™ä½ è§£é”äº†ä¸€ä¸ªéšè—åŠŸèƒ½ï¼š\nâ€œå‘¨æœ«è‡ªç”±æ¨¡å¼ï¼šä¸è®¾é—¹é’Ÿï¼Œä½†ä¼šåœ¨ä½ ç¡å¤Ÿçš„æ—¶å€™ï¼Œè‡ªåŠ¨æ¨é€ä¸€ä¸ªæ¸©æŸ”çš„ä¸‹åˆè®¡åˆ’ã€‚â€"
        }
      ]
    },

    frog: {
      id: "frog",
      emoji: "ğŸ¸",
      title: "é’è›™æ¹–çš„å¿ƒæ„¿ç“¶",
      tagline: "å…³äºæ‰¿è¯ºã€è¾¹ç•Œå’Œæ…¢æ…¢ç¡®è®¤ã€‚",
      label: "é’è›™ç‹å­çº¿",
      themeLabel: "æ¹–ç•”å¿ƒæ„¿",
      endingsMeta: [
        { id: "frog_good", name: "ä¸€èµ·æˆé•¿" },
        { id: "frog_bad", name: "ç¤¼è²Œåé€€" },
        { id: "frog_secret", name: "å¿ƒæ„¿äº¤æ¢" }
      ],
      scenes: [
        {
          id: "frog_intro",
          isStart: true,
          branchTitle: "æ™®é€šå¼€å±€ï¼šæ¡åˆ°ä¸€åªä¼šè®²è¯çš„é’è›™",
          branchNote: "å®ƒè¯´ï¼Œåªè¦ä½ ç­”åº”ä¸€ä¸ªå°å°è¯·æ±‚ï¼Œå°±ä¼šå¸®ä½ å®Œæˆä¸€ä¸ªå¿ƒæ„¿ã€‚",
          imageEmoji: "ğŸï¸",
          label: "æ¹–è¾¹é»„æ˜",
          text: "ä½ åœ¨æ¹–è¾¹ä¸¢äº†ä¸€åªæœ€å–œæ¬¢çš„ç»ç’ƒçƒï¼Œæ­£éš¾è¿‡åœ°è¹²åœ¨æ°´è¾¹ï¼Œä¸€åªé’è›™çªç„¶å†’å‡ºæ°´é¢ï¼š\n\nâ€œå¦‚æœä½ æ„¿æ„æ¯å¤©æ™šä¸Šè·Ÿæˆ‘åœ¨æ¹–è¾¹èŠååˆ†é’Ÿå¤©ï¼Œæˆ‘å°±å¸®ä½ æŠŠç»ç’ƒçƒæä¸Šæ¥ã€‚â€",
          choices: [
            { text: "è®¤çœŸè€ƒè™‘ä¸€ä¸‹è¿™ä¸ªâ€œå¥‘çº¦â€", next: "frog_think" },
            { text: "æ¡ä»¶å¬èµ·æ¥å¤ªæ€ªäº†ï¼Œå…ˆç¤¼è²Œæ‹’ç»", next: "frog_refuse" }
          ]
        },
        {
          id: "frog_think",
          imageEmoji: "ğŸ§ ",
          label: "è¾¹ç•Œå°ä¼šè®®",
          miniGame: {
            type: "quiz",
            title: "å°å…³å¡ï¼šä½ çœŸçš„èƒ½åšåˆ°å—ï¼Ÿ",
            hint: "æƒ³è±¡è¿™æ˜¯ç°å®é‡Œçš„ä¸€ä¸ªçº¦å®šï¼Œé€‰å‡ºä½ æœ€çœŸå®çš„ç­”å¤ã€‚",
            question: "å¯¹äºâ€œæ¯å¤©æ™šä¸ŠèŠååˆ†é’Ÿâ€çš„æ‰¿è¯ºï¼Œä½ æœ€çœŸå®çš„æ„Ÿè§‰æ˜¯ï¼š",
            options: [
              { text: "æˆ‘å¯ä»¥åšåˆ°ï¼Œä½†éœ€è¦æœ‰åæ‚”çš„æƒåˆ©ã€‚", next: "frog_negotiate" },
              { text: "å¬èµ·æ¥æµªæ¼«ï¼Œä½†æˆ‘çŸ¥é“è‡ªå·±å¾ˆéš¾åšæŒã€‚", next: "frog_refuse" },
              { text: "æ²¡é—®é¢˜ï¼æˆ‘ä»€ä¹ˆéƒ½ç­”åº”ï¼", next: "frog_bad_ending" }
            ]
          },
          choices: []
        },
        {
          id: "frog_refuse",
          imageEmoji: "ğŸ™…â€â™€ï¸",
          label: "ç¤¼è²Œæ‹’ç»",
          text: "ä½ è¯šå®åœ°è¯´ï¼š\nâ€œè¿™ä¸ªæ¡ä»¶æˆ‘ç°åœ¨åšä¸åˆ°ï¼Œä½†ç»ç’ƒçƒå°±å½“æ˜¯æˆ‘è‡ªå·±å¼„ä¸¢çš„å§ã€‚â€\n\né’è›™æ²‰é»˜äº†ä¸€ä¸‹ï¼Œåˆæ½œå›æ°´é‡Œã€‚",
          choices: [
            { text: "è½¬èº«ç¦»å¼€å‰ï¼Œå‘æ¹–é‡Œé“ä¸ªåˆ«", next: "frog_secret_ending" },
            { text: "é»˜é»˜èµ°å¼€ï¼Œå½“ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿ", next: "frog_bad_ending" }
          ]
        },
        {
          id: "frog_negotiate",
          imageEmoji: "ğŸ¤",
          label: "é‡æ–°å®šä¹‰å¥‘çº¦",
          text: "ä½ å¯¹é’è›™è¯´ï¼š\nâ€œå¦‚æœæˆ‘å“ªå¤©çœŸçš„åšä¸åˆ°äº†ï¼Œå¯ä»¥æå‰å‘Šè¯‰ä½ å—ï¼Ÿé‚£å¤©æˆ‘ä»¬å°±ä¸ç®—çº¦å®šçš„ä¸€éƒ¨åˆ†ã€‚â€\n\né’è›™æ­ªç€å¤´æƒ³äº†å¾ˆä¹…ï¼Œæœ€åç‚¹ç‚¹å¤´ï¼š\nâ€œé‚£æˆ‘ä»¬å°±æŒ‰è¿™ä¸ªæ–°çš„è§„åˆ™æ¥ã€‚â€",
          choices: [
            { text: "æŒ‰ç…§æ–°è§„åˆ™åšæŒä¸€æ®µæ—¶é—´è¯•è¯•çœ‹", next: "frog_good_ending" },
            { text: "å…ˆä»ä¸€å‘¨è¯•ç”¨æœŸå¼€å§‹", next: "frog_secret_ending" }
          ]
        },
        {
          id: "frog_good_ending",
          imageEmoji: "ğŸŒˆ",
          label: "ä¸€èµ·æˆé•¿",
          isEnding: true,
          endingId: "frog_good",
          endingName: "ä¸€èµ·æˆé•¿",
          text: "å¾ˆå¤šå¤©ä¹‹åï¼Œä½ å‘ç°ï¼Œè¿™ååˆ†é’Ÿçš„æ¹–è¾¹èŠå¤©ï¼Œä¸å†æ˜¯â€œä»»åŠ¡â€ï¼Œè€Œæ˜¯ä½ ä»¬å…±åŒæœŸå¾…çš„ä¸€æ®µæ—¶é—´ã€‚\n\nä½ æ²¡æœ‰ä¸ºæ­¤ç‰ºç‰²æ‰å…¨éƒ¨ç”Ÿæ´»ï¼Œè€Œæ˜¯åœ¨è¾¹ç•Œå’Œæ‰¿è¯ºä¹‹é—´ï¼Œæ…¢æ…¢æ‰¾åˆ°èˆ’æœçš„å¹³è¡¡ã€‚"
        },
        {
          id: "frog_bad_ending",
          imageEmoji: "ğŸš¶â€â™€ï¸",
          label: "ç¤¼è²Œåé€€",
          isEnding: true,
          endingId: "frog_bad",
          endingName: "ç¤¼è²Œåé€€",
          text: "ä½ è¦ä¹ˆä¸€å£æ°”ç­”åº”å¤ªå¤šï¼Œè¦ä¹ˆå¹²è„†ä¸å†å›å¤´ã€‚\n\næ•…äº‹æ²¡æœ‰å‘å±•æˆç«¥è¯ä¹¦é‚£æ ·çš„â€œç‹å­ä¸å…¬ä¸»â€ï¼Œä½†è¿™ä¸€æ¬¡ï¼Œä½ è‡³å°‘å¬è§äº†è‡ªå·±çœŸæ­£çš„æ„Ÿå—ã€‚",
          textAppend: "\\n\\nã€ç»“å±€å°è®°ã€‘\\nä¸æ˜¯æ¯ä¸€ä¸ªæ•…äº‹ï¼Œéƒ½å¿…é¡»èµ°å‘â€œåœ¨ä¸€èµ·â€çš„æ–¹å‘ã€‚å­¦ä¼šæ‹’ç»ï¼Œä¹Ÿæ˜¯å­¦ä¼šçˆ±è‡ªå·±ã€‚"
        },
        {
          id: "frog_secret_ending",
          imageEmoji: "ğŸ«§",
          label: "å¿ƒæ„¿äº¤æ¢",
          isEnding: true,
          endingId: "frog_secret",
          endingName: "å¿ƒæ„¿äº¤æ¢",
          text: "ä½ å‘æ¹–é‡Œè½»è½»é äº†ä¸€èº¬ï¼Œè¯´äº†å¥â€œè°¢è°¢ä½ å‡ºç°è¿‡â€ã€‚\n\nç¬¬äºŒå¤©ä½ è·¯è¿‡æ¹–è¾¹ï¼Œå‘ç°ç»ç’ƒçƒè¢«æ”¾åœ¨ä¸€å—çŸ³å¤´ä¸Šï¼Œæ—è¾¹è¿˜æœ‰ä¸€ä¸ªå°å°çš„å¿ƒæ„¿ç“¶ï¼Œé‡Œé¢å†™ç€ï¼š\nâ€œå¸Œæœ›ä½ ä»¥åé‡åˆ°çš„æ¯ä¸€ä¸ªçº¦å®šï¼Œéƒ½ä¸ç”¨å§”å±ˆè‡ªå·±ã€‚â€"
        }
      ]
    }
  };

  // ========= çŠ¶æ€ç®¡ç† =========
  let currentStoryId = null;
  let currentSceneId = null;
  let currentTimeout = null;

  const storyProgress = {}; // { storyId: { visited: Set, endings: Set } }

  // ========= DOM å¼•ç”¨ =========
  const overviewSection = document.getElementById("overview");
  const storyListEl = document.getElementById("story-list");
  const storyViewSection = document.getElementById("story-view");
  const backBtn = document.getElementById("back-btn");
  const mapBtn = document.getElementById("map-btn");
  const restartBtn = document.getElementById("restart-btn");
  const storyNameEl = document.getElementById("story-name");
  const storyEmojiEl = document.getElementById("story-emoji");
  const storyLabelEl = document.getElementById("story-label");
  const sceneTextEl = document.getElementById("scene-text");
  const miniGameAreaEl = document.getElementById("mini-game-area");
  const choicesEl = document.getElementById("choices");

  const mapModal = document.getElementById("story-map-modal");
  const mapTitleEl = document.getElementById("map-title");
  const mapDescEl = document.getElementById("map-desc");
  const branchListEl = document.getElementById("branch-list");
  const mapProgressEl = document.getElementById("map-progress");
  const mapCloseBtn = document.getElementById("map-close-btn");

  // ========= åˆå§‹åŒ–æ€»è§ˆ =========
  function initOverview() {
    storyListEl.innerHTML = "";
    Object.values(stories).forEach(story => {
      if (!storyProgress[story.id]) {
        storyProgress[story.id] = { visited: new Set(), endings: new Set() };
      }
      const progress = storyProgress[story.id];
      const card = document.createElement("div");
      card.className = "story-card";
      card.dataset.storyId = story.id;

      const badge = document.createElement("div");
      badge.className = "story-badge";
      const endingsFound = progress.endings.size;
      if (endingsFound === 0) {
        badge.textContent = "æœªå¼€å§‹";
      } else if (endingsFound < (story.endingsMeta?.length || 1)) {
        badge.textContent = "è¿›è¡Œä¸­";
      } else {
        badge.textContent = "å·²æ”¶é›†å…¨éƒ¨ç»“å±€";
      }

      const emojiSpan = document.createElement("div");
      emojiSpan.className = "story-emoji";
      emojiSpan.textContent = story.emoji;

      const titleDiv = document.createElement("div");
      titleDiv.className = "story-title";
      titleDiv.textContent = story.title;

      const taglineDiv = document.createElement("div");
      taglineDiv.className = "story-tagline";
      taglineDiv.textContent = story.tagline;

      const metaDiv = document.createElement("div");
      metaDiv.className = "story-meta";

      const labelSpan = document.createElement("span");
      labelSpan.textContent = story.label;

      const chipsSpan = document.createElement("span");
      chipsSpan.className = "chips";

      if (story.endingsMeta) {
        story.endingsMeta.forEach(e => {
          const chip = document.createElement("span");
          chip.className = "chip";
          if (progress.endings.has(e.id)) {
            chip.classList.add("found");
          }
          chip.textContent = e.name;
          chipsSpan.appendChild(chip);
        });
      }

      metaDiv.appendChild(labelSpan);
      metaDiv.appendChild(chipsSpan);

      card.appendChild(badge);
      card.appendChild(emojiSpan);
      card.appendChild(titleDiv);
      card.appendChild(taglineDiv);
      card.appendChild(metaDiv);

      card.addEventListener("click", () => {
        startStory(story.id);
      });

      storyListEl.appendChild(card);
    });
  }

  // ========= è¾…åŠ©å‡½æ•° =========
  function getStory(storyId) {
    return stories[storyId];
  }

  function getScenesMap(story) {
    const map = {};
    story.scenes.forEach(s => {
      map[s.id] = s;
    });
    return map;
  }

  function findStartScene(story) {
    return story.scenes.find(s => s.isStart) || story.scenes[0];
  }

  function clearTimeoutSafe() {
    if (currentTimeout) {
      clearTimeout(currentTimeout);
      currentTimeout = null;
    }
  }

  // ========= åˆ‡æ¢æ•…äº‹ =========
  function startStory(storyId) {
    clearTimeoutSafe();
    currentStoryId = storyId;
    const story = getStory(storyId);
    const startScene = findStartScene(story);
    currentSceneId = startScene.id;

    storyNameEl.textContent = story.title;
    storyEmojiEl.textContent = story.emoji;
    storyLabelEl.textContent = story.themeLabel || story.label || "";

    overviewSection.classList.add("hidden");
    storyViewSection.classList.add("active");

    renderScene();
  }

  function backToOverview() {
    clearTimeoutSafe();
    currentStoryId = null;
    currentSceneId = null;
    storyViewSection.classList.remove("active");
    overviewSection.classList.remove("hidden");
    initOverview();
  }

  // ========= æ¸²æŸ“åœºæ™¯ =========
  function renderScene() {
    clearTimeoutSafe();
    const story = getStory(currentStoryId);
    if (!story) return;
    const scenesMap = getScenesMap(story);
    const scene = scenesMap[currentSceneId];
    if (!scene) return;

    // è®°å½•è¿›åº¦
    storyProgress[currentStoryId].visited.add(scene.id);

    storyEmojiEl.textContent = scene.imageEmoji || story.emoji;
    storyLabelEl.textContent = scene.label || story.themeLabel || "";

    let sceneText = scene.text || "";
    if (scene.isEnding && scene.textAppend) {
      sceneText += scene.textAppend;
    }
    sceneTextEl.textContent = sceneText;

    miniGameAreaEl.innerHTML = "";
    choicesEl.innerHTML = "";

    if (scene.miniGame) {
      renderMiniGame(scene.miniGame);
    }

    if (scene.isEnding) {
      // æ ‡è®°ç»“å±€
      if (scene.endingId) {
        storyProgress[currentStoryId].endings.add(scene.endingId);
      }
      // æ˜¾ç¤ºç»“å±€æ ‡ç­¾
      const endingTag = document.createElement("div");
      endingTag.className = "ending-tag";
      endingTag.innerHTML = "ğŸ¬ å·²åˆ°è¾¾ç»“å±€ Â· " + (scene.endingName || "æœ¬æ•…äº‹çš„å°ç»ˆç‚¹");
      miniGameAreaEl.appendChild(endingTag);

      // æä¾›æ“ä½œæŒ‰é’®
      const btn1 = document.createElement("button");
      btn1.className = "choice-btn primary";
      btn1.innerHTML = '<span class="label">å†ç©ä¸€æ¬¡æœ¬æ•…äº‹ï¼Œè¯•è¯•åˆ«çš„åˆ†æ”¯</span><span class="arrow">â†º</span>';
      btn1.addEventListener("click", () => {
        const start = findStartScene(story);
        currentSceneId = start.id;
        renderScene();
      });

      const btn2 = document.createElement("button");
      btn2.className = "choice-btn";
      btn2.innerHTML = '<span class="label">è¿”å›æ€»è§ˆï¼Œæ¢ä¸€ä¸ªç«¥è¯ä¸–ç•Œ</span><span class="arrow">ğŸ </span>';
      btn2.addEventListener("click", () => {
        backToOverview();
      });

      choicesEl.appendChild(btn1);
      choicesEl.appendChild(btn2);
      return;
    }

    // æ™®é€šé€‰æ‹©
    (scene.choices || []).forEach((ch, index) => {
      const btn = document.createElement("button");
      btn.className = "choice-btn" + (index === 0 ? " primary" : "");
      btn.innerHTML = '<span class="label">' + ch.text + '</span><span class="arrow">â€º</span>';
      btn.addEventListener("click", () => {
        currentSceneId = ch.next;
        renderScene();
      });
      choicesEl.appendChild(btn);
    });
  }

  // ========= å°æ¸¸æˆæ¸²æŸ“ =========
  function renderMiniGame(game) {
    miniGameAreaEl.innerHTML = "";

    const title = document.createElement("div");
    title.className = "mini-title";
    title.textContent = game.title || "å°å…³å¡";

    const hint = document.createElement("div");
    hint.className = "mini-hint";
    hint.textContent = game.hint || "";

    miniGameAreaEl.appendChild(title);
    miniGameAreaEl.appendChild(hint);

    const pill = document.createElement("span");
    pill.className = "mini-pill";
    pill.textContent = "é—¯å…³æˆåŠŸæ‰èƒ½ç»§ç»­å“¦";
    title.appendChild(pill);

    if (game.type === "memory") {
      const list = document.createElement("div");
      list.id = "memory-list";
      list.style.display = "flex";
      list.style.flexDirection = "column";
      list.style.gap = "4px";
      list.style.marginBottom = "4px";

      game.words.forEach(w => {
        const row = document.createElement("div");
        row.textContent = "Â· " + w;
        row.style.fontSize = "0.8rem";
        list.appendChild(row);
      });

      miniGameAreaEl.appendChild(list);

      const tip = document.createElement("div");
      tip.style.fontSize = "0.76rem";
      tip.style.color = "#9f1239";
      tip.textContent = "è®°å¿†ä¸­â€¦â€¦5 ç§’åé—®é¢˜å‡ºç°ã€‚";
      miniGameAreaEl.appendChild(tip);

      currentTimeout = setTimeout(() => {
        list.style.display = "none";
        tip.textContent = "ç°åœ¨è¯·é€‰å‡ºåˆšåˆšçœŸæ­£å‡ºç°è¿‡çš„ä¸€æ¡çº¦å®šï¼š";

        const opts = document.createElement("div");
        opts.className = "mini-options";

        game.words.forEach((w, idx) => {
          const btn = document.createElement("button");
          btn.className = "choice-btn";
          btn.innerHTML = '<span class="label">' + w + '</span><span class="arrow">?</span>';
          btn.addEventListener("click", () => {
            const correct = (idx === game.correctIndex);
            if (correct) {
              currentSceneId = game.successNext;
            } else {
              currentSceneId = game.failNext;
            }
            renderScene();
          });
          opts.appendChild(btn);
        });

        miniGameAreaEl.appendChild(opts);
      }, 5000);
    } else if (game.type === "quiz") {
      const questionDiv = document.createElement("div");
      questionDiv.style.fontSize = "0.82rem";
      questionDiv.style.marginTop = "4px";
      questionDiv.textContent = game.question || "";
      miniGameAreaEl.appendChild(questionDiv);

      const opts = document.createElement("div");
      opts.className = "mini-options";

      (game.options || []).forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "choice-btn" + (idx === 0 ? " primary" : "");
        btn.innerHTML = '<span class="label">' + opt.text + '</span><span class="arrow">âœ”</span>';
        btn.addEventListener("click", () => {
          currentSceneId = opt.next;
          renderScene();
        });
        opts.appendChild(btn);
      });

      miniGameAreaEl.appendChild(opts);
    } else if (game.type === "inputCode") {
      const inputRow = document.createElement("div");
      inputRow.className = "mini-input-row";

      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = game.placeholder || "è¾“å…¥ä½ å¿ƒé‡Œçš„ç­”æ¡ˆ";
      inputRow.appendChild(input);

      const btn = document.createElement("button");
      btn.className = "pill-btn";
      btn.textContent = "è¯•è¯•å’’è¯­";
      inputRow.appendChild(btn);

      miniGameAreaEl.appendChild(inputRow);

      const msg = document.createElement("div");
      msg.style.fontSize = "0.76rem";
      msg.style.color = "#b91c1c";
      msg.style.marginTop = "4px";
      miniGameAreaEl.appendChild(msg);

      btn.addEventListener("click", () => {
        const val = (input.value || "").trim().toLowerCase();
        const solution = (game.solution || "").trim().toLowerCase();
        if (val && solution && val === solution) {
          currentSceneId = game.successNext;
          renderScene();
        } else {
          if (val === "") {
            msg.textContent = "å…ˆåœ¨å¿ƒé‡Œç»™è‡ªå·±ä¸€ä¸ªç­”æ¡ˆï¼Œå†æŠŠå®ƒæ‰“å‡ºæ¥ã€‚";
          } else {
            msg.textContent = "è¿™ä¸ªå’’è¯­ä¼¼ä¹æ²¡æœ‰ååº”ï¼Œæˆ–è®¸ä½ å¯ä»¥å°è¯•å¦ä¸€ä¸ªï¼Œæ›´æ¥è¿‘ä½ çœŸå®æƒ³æ³•çš„è¯ã€‚";
          }
        }
      });

      const giveUp = document.createElement("button");
      giveUp.className = "choice-btn";
      giveUp.style.marginTop = "6px";
      giveUp.innerHTML = '<span class="label">ç®—äº†ï¼Œä¸è¾“å…¥å’’è¯­ï¼Œç›´æ¥è®©æ•…äº‹ç»§ç»­</span><span class="arrow">â†’</span>';
      giveUp.addEventListener("click", () => {
        currentSceneId = game.failNext;
        renderScene();
      });
      miniGameAreaEl.appendChild(giveUp);
    } else if (game.type === "slider") {
      const wrapper = document.createElement("div");
      wrapper.style.marginTop = "4px";

      const valueLabel = document.createElement("div");
      valueLabel.style.fontSize = "0.78rem";
      valueLabel.style.marginBottom = "4px";
      valueLabel.textContent = "å½“å‰é€‰æ‹©ï¼š8:00";

      const slider = document.createElement("input");
      slider.type = "range";
      slider.min = game.min ?? 6;
      slider.max = game.max ?? 10;
      slider.step = game.step ?? 0.5;
      slider.value = 8;

      slider.style.width = "100%";

      slider.addEventListener("input", () => {
        const v = parseFloat(slider.value);
        const hour = Math.floor(v);
        const min = (v - hour) > 0 ? "30" : "00";
        valueLabel.textContent = "å½“å‰é€‰æ‹©ï¼š" + hour + ":" + min;
      });

      const btn = document.createElement("button");
      btn.className = "choice-btn primary";
      btn.style.marginTop = "6px";
      btn.innerHTML = '<span class="label">å°±ç”¨è¿™ä¸ªæ—¶é—´èµ·åºŠ</span><span class="arrow">â°</span>';

      const msg = document.createElement("div");
      msg.style.fontSize = "0.76rem";
      msg.style.color = "#b45309";
      msg.style.marginTop = "4px";

      btn.addEventListener("click", () => {
        const v = parseFloat(slider.value);
        const [low, high] = game.successRange || [7.5,8.5];
        if (v >= low && v <= high) {
          currentSceneId = game.successNext;
        } else {
          currentSceneId = game.failNext;
        }
        renderScene();
      });

      wrapper.appendChild(valueLabel);
      wrapper.appendChild(slider);
      wrapper.appendChild(btn);
      wrapper.appendChild(msg);
      miniGameAreaEl.appendChild(wrapper);
    }
  }

  // ========= å‰§æƒ…åœ°å›¾ =========
  function openStoryMap() {
    const story = getStory(currentStoryId);
    if (!story) return;

    mapTitleEl.textContent = story.title + " Â· å‰§æƒ…åœ°å›¾";
    mapDescEl.textContent = "æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªé‡è¦å²”è·¯æˆ–å¼€å±€ï¼Œä½ å¯ä»¥ç›´æ¥è·³åˆ°é‚£é‡Œé‡ç©ã€‚";

    branchListEl.innerHTML = "";

    const branches = story.scenes.filter(s => s.isStart || s.branchTitle);
    branches.forEach(br => {
      const item = document.createElement("div");
      item.className = "branch-item";

      const title = document.createElement("div");
      title.className = "branch-title";
      title.textContent = br.branchTitle || (br.isStart ? "æ™®é€šå¼€å±€" : (br.label || "åˆ†æ”¯èŠ‚ç‚¹"));

      const note = document.createElement("div");
      note.className = "branch-note";
      note.textContent = br.branchNote || (br.text ? br.text.slice(0, 46) + (br.text.length > 46 ? "..." : "") : "");

      const actions = document.createElement("div");
      actions.className = "branch-actions";

      const btn = document.createElement("button");
      btn.textContent = "ä»è¿™é‡Œå¼€å§‹";
      btn.addEventListener("click", () => {
        currentSceneId = br.id;
        mapModal.classList.remove("active");
        renderScene();
      });

      actions.appendChild(btn);
      item.appendChild(title);
      item.appendChild(note);
      item.appendChild(actions);
      branchListEl.appendChild(item);
    });

    const endingsTotal = story.endingsMeta?.length || 0;
    const endingsFound = storyProgress[currentStoryId].endings.size;
    if (endingsTotal > 0) {
      mapProgressEl.textContent = "å·²æ”¶é›†ç»“å±€ï¼š" + endingsFound + " / " + endingsTotal;
    } else {
      mapProgressEl.textContent = "";
    }

    mapModal.classList.add("active");
  }

  function closeStoryMap() {
    mapModal.classList.remove("active");
  }

  // ========= äº‹ä»¶ç»‘å®š =========
  backBtn.addEventListener("click", backToOverview);
  restartBtn.addEventListener("click", () => {
    const story = getStory(currentStoryId);
    if (!story) return;
    const start = findStartScene(story);
    currentSceneId = start.id;
    renderScene();
  });
  mapBtn.addEventListener("click", openStoryMap);
  mapCloseBtn.addEventListener("click", closeStoryMap);
  mapModal.addEventListener("click", (e) => {
    if (e.target === mapModal) {
      closeStoryMap();
    }
  });

  // ========= å¯åŠ¨ =========
  initOverview();
</script>
</body>
</html>
