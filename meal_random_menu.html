<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä»Šå¤©åƒä»€ä¹ˆï¼Ÿéšæœºèœå•ç”Ÿæˆå™¨</title>
  <style>
    :root {
      --bg: #0f172a;
      --bg-soft: #111827;
      --card: #020617;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --accent-strong: #4ade80;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --danger: #f97373;
      --radius-xl: 18px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.8);
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "PingFang SC",
        "Noto Sans CJK SC", "Microsoft YaHei", sans-serif;
      background: radial-gradient(circle at top left, #1f2937 0, #020617 45%, #020617 100%);
      color: var(--text-main);
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 20px 12px 32px;
    }

    .app-shell {
      width: 100%;
      max-width: 960px;
      margin: 0 auto;
    }

    .app-header {
      text-align: left;
      margin-bottom: 18px;
    }

    .app-header h1 {
      margin: 0 0 6px;
      font-size: 2rem;
      letter-spacing: 0.03em;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .app-header h1 span.emoji {
      font-size: 1.7rem;
    }

    .app-header p {
      margin: 0;
      color: var(--text-muted);
      font-size: 0.95rem;
    }

    .card {
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.96), rgba(2, 6, 23, 0.98));
      border-radius: var(--radius-xl);
      border: 1px solid rgba(31, 41, 55, 0.9);
      box-shadow: var(--shadow-soft);
      padding: 18px 18px 16px;
      backdrop-filter: blur(16px);
    }

    .filters-card {
      margin-bottom: 18px;
    }

    .card h2 {
      margin: 0 0 12px;
      font-size: 1.1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 0.7rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      background: rgba(15, 118, 110, 0.15);
      color: #a5f3fc;
      border: 1px solid rgba(45, 212, 191, 0.4);
    }

    .filters-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-bottom: 12px;
    }

    .filter-group label {
      display: block;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .filter-group select {
      width: 100%;
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text-main);
      font-size: 0.85rem;
      outline: none;
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, var(--accent-strong) 50%),
        linear-gradient(135deg, var(--accent-strong) 50%, transparent 50%);
      background-position: calc(100% - 15px) 11px, calc(100% - 10px) 11px;
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
    }

    .filter-group select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.4);
    }

    .actions-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 6px;
    }

    .btn {
      border-radius: 999px;
      border: 1px solid transparent;
      padding: 7px 14px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      transition: all 0.18s ease;
    }

    .btn.primary {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.45);
    }

    .btn.primary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
      box-shadow: 0 14px 32px rgba(16, 185, 129, 0.6);
    }

    .btn.ghost {
      background: rgba(15, 23, 42, 0.6);
      color: var(--text-main);
      border-color: rgba(55, 65, 81, 0.9);
    }

    .btn.ghost:hover {
      border-color: var(--accent);
      background: rgba(21, 128, 61, 0.12);
    }

    .btn.subtle {
      background: transparent;
      color: var(--text-muted);
      border-color: transparent;
      padding-inline: 10px;
    }

    .btn.subtle:hover {
      color: var(--accent-strong);
      background: rgba(15, 23, 42, 0.8);
    }

    .btn span.icon {
      font-size: 1rem;
    }

    .hint-text {
      margin: 0;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .menu-card {
      margin-bottom: 14px;
    }

    .menu-header-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
      margin-bottom: 6px;
      flex-wrap: wrap;
    }

    .menu-meta {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .menu-meta strong {
      color: var(--accent-strong);
      font-weight: 600;
    }

    .menu-result {
      margin-top: 4px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .menu-result.empty {
      display: block;
    }

    .empty p {
      margin: 6px 0 2px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .recipe-card {
      border-radius: 16px;
      border: 1px solid rgba(31, 41, 55, 0.95);
      background: radial-gradient(circle at top left, rgba(34, 197, 94, 0.12), rgba(15, 23, 42, 0.98));
      padding: 10px 10px 9px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 120px;
      position: relative;
      overflow: hidden;
    }

    .recipe-role {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent-strong);
      margin-bottom: 4px;
    }

    .recipe-name {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 4px;
      line-height: 1.25;
    }

    .recipe-meta {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .tag-pill {
      font-size: 0.7rem;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(4px);
    }

    .tag-pill.goal {
      border-color: rgba(34, 197, 94, 0.8);
      color: #bbf7d0;
      background: rgba(22, 163, 74, 0.25);
    }

    .tag-pill.spicy {
      border-color: rgba(239, 68, 68, 0.9);
      color: #fecaca;
      background: rgba(127, 29, 29, 0.4);
    }

    .tag-pill.light {
      border-color: rgba(45, 212, 191, 0.8);
      color: #a5f3fc;
      background: rgba(15, 118, 110, 0.4);
    }

    .recipe-glow {
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top right, rgba(34, 197, 94, 0.12), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .app-footer {
      text-align: center;
      font-size: 0.7rem;
      color: #6b7280;
      margin-top: 4px;
    }

    @media (max-width: 768px) {
      body {
        padding-inline: 10px;
      }
      .filters-grid {
        grid-template-columns: 1fr;
      }
      .menu-result {
        grid-template-columns: 1fr;
      }
      .actions-row {
        flex-direction: column;
        align-items: stretch;
      }
      .btn {
        justify-content: center;
      }
    }

    @media (min-width: 769px) and (max-width: 1024px) {
      .menu-result {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <h1><span class="emoji">ğŸ¥—</span> ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ</h1>
      <p>ç»™é€‰æ‹©å›°éš¾ç—‡å¥³æœ‹å‹å‡†å¤‡çš„ Â· éšæœºä½†é è°±çš„æ¯æ—¥èœå•å°åŠ©æ‰‹</p>
    </header>

    <section class="card filters-card">
      <div class="menu-header-row">
        <h2>å…ˆè¯´è¯´å¤§æ–¹å‘</h2>
        <span class="badge">å…±å†…ç½® 134 é“èœ</span>
      </div>
      <div class="filters-grid">
        <div class="filter-group">
          <label for="goalFilter">é¥®é£Ÿç›®æ ‡</label>
          <select id="goalFilter">
            <option value="">éšä¾¿ï¼Œå…ˆåƒé¥±</option>
            <option value="diet">å‡è„‚è½»é£Ÿ</option>
            <option value="balanced">æ—¥å¸¸å‡è¡¡</option>
            <option value="protein">é«˜è›‹ç™½ / å¥èº«</option>
            <option value="comfort">å®‰æ…°è§£é¦‹</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="cuisineFilter">æƒ³åƒå“ªä¸€æŒ‚</label>
          <select id="cuisineFilter">
            <option value="">éƒ½å¯ä»¥</option>
            <option value="cn_home">ä¸­é¤ Â· å®¶å¸¸</option>
            <option value="cn_sichuan">ä¸­é¤ Â· å·æ¹˜è¾£</option>
            <option value="cn_cantonese">ç²¤èœ / æ¸¯å¼</option>
            <option value="japanese">æ—¥æ–™</option>
            <option value="korean">éŸ©å¼</option>
            <option value="western">è¥¿é¤ / æ„é¢æ²™æ‹‰</option>
            <option value="thai">ä¸œå—äºš / æ³°å¼</option>
            <option value="salad">æ²™æ‹‰ / è½»é£Ÿç¢—</option>
            <option value="dessert">æ—©é¤ / å°ç”œç‚¹</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="vegFilter">è¤ç´ åå¥½</label>
          <select id="vegFilter">
            <option value="any">æ— æ‰€è°“ï¼Œæ­é…å°±å¥½</option>
            <option value="veggie">å¤šåƒèœ / ç´ ä¸€ç‚¹</option>
            <option value="meat">å¤šåƒè‚‰ / é«˜è›‹ç™½</option>
          </select>
        </div>
      </div>
      <div class="actions-row">
        <button id="btnGenerate" class="btn primary">
          <span class="icon">âœ¨</span><span>ç”Ÿæˆä»Šæ—¥èœå•</span>
        </button>
        <button id="btnShuffle" class="btn ghost">
          <span class="icon">ğŸ²</span><span>æ¢ä¸€æ‰¹</span>
        </button>
        <button id="btnSuperRandom" class="btn subtle">
          <span class="icon">ğŸ™ˆ</span><span>æˆ‘æ‡’å¾—é€‰ï¼Œå®Œå…¨éšæœº</span>
        </button>
      </div>
      <p class="hint-text">å°æç¤ºï¼šä»€ä¹ˆéƒ½ä¸é€‰ä¹Ÿå¯ä»¥ï¼Œç›´æ¥ç‚¹â€œç”Ÿæˆä»Šæ—¥èœå•â€æˆ–â€œå®Œå…¨éšæœºâ€ã€‚</p>
    </section>

    <section class="card menu-card">
      <div class="menu-header-row">
        <h2>ä¸ºä½ é€‰å¥½çš„èœå•</h2>
        <div class="menu-meta" id="menuMeta"></div>
      </div>
      <div id="menuResult" class="menu-result empty">
        <p>ğŸ‘† å…ˆåœ¨ä¸Šé¢é€‰ä¸€é€‰ï¼Œæˆ–è€…ç›´æ¥ç‚¹â€œç”Ÿæˆä»Šæ—¥èœå•â€ã€‚</p>
        <p>ç³»ç»Ÿä¼šèªæ˜åœ°å¸®ä½ æ­é… 1 é“ä¸»èœ + 1 é“é…èœ / æ²™æ‹‰ + 1 ç¢—æ±¤ / é¥®å“ã€‚</p>
      </div>
    </section>

    <footer class="app-footer">
      <p>æŠŠè¿™ä¸ªç½‘é¡µç¦»çº¿ä¿å­˜åˆ°æ‰‹æœºä¸»å±å¹•ï¼Œå°±æˆäº†éšèº«â€œåƒé¥­å†³ç­–æœºâ€ã€‚</p>
    </footer>
  </div>

  <script>
    // èœè°±æ•°æ®
    const RECIPES = [
  {
    "id": 1,
    "name": "ç•ªèŒ„ç‚’è›‹",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "diet"
    ],
    "tags": [
      "quick",
      "vegetarian"
    ]
  },
  {
    "id": 2,
    "name": "é’æ¤’åœŸè±†ä¸",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "diet"
    ],
    "tags": [
      "quick",
      "vegetarian"
    ]
  },
  {
    "id": 3,
    "name": "é¦™å¹²èŠ¹èœç‚’è‚‰",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "quick"
    ]
  },
  {
    "id": 4,
    "name": "æœ¨è€³ç‚’è‚‰ç‰‡",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "quick"
    ]
  },
  {
    "id": 5,
    "name": "è’œè‹—å›é”…è‚‰",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 6,
    "name": "çº¢çƒ§èŒ„å­",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "comfort"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 7,
    "name": "å®¶å¸¸è±†è…",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 8,
    "name": "ç³–é†‹é‡Œè„Š",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 9,
    "name": "è‘±çˆ†ç‰›è‚‰",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "protein",
      "comfort"
    ],
    "tags": [
      "high_protein"
    ]
  },
  {
    "id": 10,
    "name": "é±¼é¦™è‚‰ä¸",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 11,
    "name": "è¥¿è‘«èŠ¦é¸¡è›‹é¥¼",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 12,
    "name": "é¸¡ä¸å½©æ¤’ç›–é¥­",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "quick"
    ]
  },
  {
    "id": 13,
    "name": "é¦™è‡æ»‘é¸¡ç…²",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "high_protein"
    ]
  },
  {
    "id": 14,
    "name": "æ¸…è’¸é²ˆé±¼",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "seafood",
      "low_carb"
    ]
  },
  {
    "id": 15,
    "name": "è±‰æ±è’¸æ’éª¨",
    "cuisine": "cn_home",
    "type": "main",
    "goals": [
      "balanced",
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 16,
    "name": "å®«ä¿é¸¡ä¸",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "balanced",
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 17,
    "name": "æ°´ç…®ç‰›è‚‰",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 18,
    "name": "éº»å©†è±†è…",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "spicy",
      "vegetarian"
    ]
  },
  {
    "id": 19,
    "name": "é…¸èœé±¼ç‰‡",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "spicy",
      "seafood"
    ]
  },
  {
    "id": 20,
    "name": "é¦™è¾£è™¾",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "comfort",
      "protein"
    ],
    "tags": [
      "spicy",
      "seafood"
    ]
  },
  {
    "id": 21,
    "name": "è¾£å­é¸¡ä¸",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 22,
    "name": "æ³¡æ¤’ç”°é¸¡",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 23,
    "name": "é±¼é¦™èŒ„å­",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "balanced",
      "comfort"
    ],
    "tags": [
      "spicy",
      "vegetarian"
    ]
  },
  {
    "id": 24,
    "name": "å›é”…è‚‰ç‰‡",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 25,
    "name": "å£æ°´é¸¡",
    "cuisine": "cn_sichuan",
    "type": "main",
    "goals": [
      "protein",
      "diet"
    ],
    "tags": [
      "spicy",
      "high_protein"
    ]
  },
  {
    "id": 26,
    "name": "æ¸…è’¸å¤šå®é±¼",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "seafood",
      "mild"
    ]
  },
  {
    "id": 27,
    "name": "å§œè‘±ç‚’èŠ±è›¤",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "seafood"
    ]
  },
  {
    "id": 28,
    "name": "è±‰æ²¹çš‡é¸¡è…¿",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": []
  },
  {
    "id": 29,
    "name": "å¹¿å¼å‰çƒ§",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 30,
    "name": "è±‰æ±è’¸å‡¤çˆª",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 31,
    "name": "è±‰æ²¹çš‡ç‚’é¢",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "noodle"
    ]
  },
  {
    "id": 32,
    "name": "æ»‘è›‹è™¾ä»",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "seafood",
      "high_protein"
    ]
  },
  {
    "id": 33,
    "name": "æŸ±å€™ç‰›è…©ç…²",
    "cuisine": "cn_cantonese",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 34,
    "name": "ç…§çƒ§é¸¡è…¿é¥­",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "high_protein"
    ]
  },
  {
    "id": 35,
    "name": "ä¸‰æ–‡é±¼åˆºèº«é¥­",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "seafood",
      "low_carb"
    ]
  },
  {
    "id": 36,
    "name": "é³—é±¼è’²çƒ§é¥­",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "seafood"
    ]
  },
  {
    "id": 37,
    "name": "æ—¥å¼å’–å–±ç‰›è‚‰é¥­",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 38,
    "name": "äº²å­ä¸¼ï¼ˆé¸¡è‚‰é¸¡è›‹ç›–é¥­ï¼‰",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "high_protein"
    ]
  },
  {
    "id": 39,
    "name": "å‘³å™Œçƒ¤é±¼å®šé£Ÿ",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "seafood"
    ]
  },
  {
    "id": 40,
    "name": "é¸¡è‚‰å†·èéº¦é¢",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "diet"
    ],
    "tags": [
      "noodle",
      "light"
    ]
  },
  {
    "id": 41,
    "name": "é‡‘æªé±¼æ²™æ‹‰é¥­",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "diet"
    ],
    "tags": [
      "seafood",
      "light"
    ]
  },
  {
    "id": 42,
    "name": "ç‰›è‚‰å¯¿å–œé”…",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "comfort",
      "protein"
    ],
    "tags": []
  },
  {
    "id": 43,
    "name": "æ—¥å¼ç‚¸çŒªæ’é¥­",
    "cuisine": "japanese",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 44,
    "name": "çŸ³é”…æ‹Œé¥­",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 45,
    "name": "éƒ¨é˜Ÿç«é”…",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 46,
    "name": "éŸ©å¼çƒ¤äº”èŠ±è‚‰å¥—é¤",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "comfort",
      "protein"
    ],
    "tags": [
      "high_protein"
    ]
  },
  {
    "id": 47,
    "name": "æ³¡èœè±†è…é”…",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "diet"
    ],
    "tags": [
      "spicy",
      "vegetarian"
    ]
  },
  {
    "id": 48,
    "name": "è¾£ç‚’é¸¡çˆªå¹´ç³•",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 49,
    "name": "éŸ©å¼è‚¥ç‰›æ‹Œé¥­",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": []
  },
  {
    "id": 50,
    "name": "æµ·é²œè‘±é¥¼",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "seafood"
    ]
  },
  {
    "id": 51,
    "name": "è¾£ç™½èœç‚’äº”èŠ±",
    "cuisine": "korean",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 52,
    "name": "è¿·è¿­é¦™çƒ¤é¸¡èƒ¸é…è”¬èœ",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "high_protein",
      "low_carb"
    ]
  },
  {
    "id": 53,
    "name": "é»‘æ¤’ç‰›æ’é…èŠ¦ç¬‹",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "protein"
    ],
    "tags": [
      "high_protein",
      "low_carb"
    ]
  },
  {
    "id": 54,
    "name": "å¥¶æ²¹åŸ¹æ ¹æ„é¢",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "noodle"
    ]
  },
  {
    "id": 55,
    "name": "ç•ªèŒ„æµ·é²œæ„å¤§åˆ©é¢",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "seafood",
      "noodle"
    ]
  },
  {
    "id": 56,
    "name": "ç½—å‹’é’é…±é¸¡èƒ¸æ„é¢",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "high_protein",
      "noodle"
    ]
  },
  {
    "id": 57,
    "name": "çƒ¤ä¸‰æ–‡é±¼é…è—œéº¦æ²™æ‹‰",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "seafood",
      "light"
    ]
  },
  {
    "id": 58,
    "name": "ç‰›æ²¹æœé¸¡è›‹åå¸",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "diet",
      "balanced"
    ],
    "tags": [
      "vegetarian",
      "breakfast"
    ]
  },
  {
    "id": 59,
    "name": "æ³•å¼ç„—è”¬èœé…é¸¡è…¿",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": []
  },
  {
    "id": 60,
    "name": "å¢¨è¥¿å“¥é¸¡è‚‰å·é¥¼",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "handheld"
    ]
  },
  {
    "id": 61,
    "name": "ç‰›è‚‰æ±‰å ¡é…æ²™æ‹‰",
    "cuisine": "western",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 62,
    "name": "é¸¡èƒ¸è‚‰å‡¯æ’’æ²™æ‹‰",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "salad",
      "high_protein"
    ]
  },
  {
    "id": 63,
    "name": "è—œéº¦ç‰›æ²¹æœé¸¡è‚‰ç¢—",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "salad",
      "high_protein",
      "low_carb"
    ]
  },
  {
    "id": 64,
    "name": "ä¸‰æ–‡é±¼ç‰›æ²¹æœæ‹Œé¥­",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet"
    ],
    "tags": [
      "seafood",
      "salad"
    ]
  },
  {
    "id": 65,
    "name": "åœ°ä¸­æµ·é¹°å˜´è±†æ²™æ‹‰",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet",
      "balanced"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 66,
    "name": "çƒ¤å—ç“œèŠéº»èœæ²™æ‹‰",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 67,
    "name": "ç‰›è‚‰è èœèƒ½é‡ç¢—",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "protein"
    ],
    "tags": [
      "high_protein"
    ]
  },
  {
    "id": 68,
    "name": "å†·èéº¦é¢æ²™æ‹‰ç¢—",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "noodle"
    ]
  },
  {
    "id": 69,
    "name": "é¦™æ©™é¸¡è‚‰æ‚ç²®ç¢—",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "salad"
    ]
  },
  {
    "id": 70,
    "name": "è±†è…è”¬èœä½›ç³»ç¢—",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 71,
    "name": "è™¾ä»èŠ’æœæ²™æ‹‰",
    "cuisine": "salad",
    "type": "salad",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "seafood"
    ]
  },
  {
    "id": 72,
    "name": "å†¬é˜´åŠŸæµ·é²œæ±¤é¢",
    "cuisine": "thai",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "spicy",
      "seafood"
    ]
  },
  {
    "id": 73,
    "name": "æ³°å¼ç½—å‹’ç‚’é¸¡è‚‰é…é¥­",
    "cuisine": "thai",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 74,
    "name": "ç»¿å’–å–±é¸¡é…ç³™ç±³é¥­",
    "cuisine": "thai",
    "type": "main",
    "goals": [
      "balanced"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 75,
    "name": "æ³°å¼ç‰›è‚‰æ²™æ‹‰",
    "cuisine": "thai",
    "type": "main",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "spicy",
      "salad"
    ]
  },
  {
    "id": 76,
    "name": "æ¤°æ±å’–å–±è™¾é…ç±³ç²‰",
    "cuisine": "thai",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "seafood"
    ]
  },
  {
    "id": 77,
    "name": "è èæµ·é²œç‚’é¥­",
    "cuisine": "thai",
    "type": "main",
    "goals": [
      "comfort"
    ],
    "tags": [
      "seafood"
    ]
  },
  {
    "id": 78,
    "name": "è¶Šå—ç‰›è‚‰æ²³ç²‰",
    "cuisine": "thai",
    "type": "main",
    "goals": [
      "balanced",
      "comfort"
    ],
    "tags": [
      "soup",
      "noodle"
    ]
  },
  {
    "id": 79,
    "name": "å‡‰æ‹Œé»„ç“œ",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet",
      "balanced"
    ],
    "tags": [
      "vegetarian",
      "quick"
    ]
  },
  {
    "id": 80,
    "name": "è’œè“‰ç”Ÿèœ",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet",
      "balanced"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 81,
    "name": "èšæ²¹è¥¿å…°èŠ±",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet",
      "balanced"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 82,
    "name": "å‡‰æ‹Œæœ¨è€³",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 83,
    "name": "å‡‰æ‹Œè±†è…çš®",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 84,
    "name": "æ‰‹æ’•åŒ…èœ",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "balanced"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 85,
    "name": "é¦™å¹²é©¬å…°å¤´",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 86,
    "name": "è’œè“‰è èœ",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 87,
    "name": "æ¸…ç‚’æ—¶è”¬æ‹¼ç›˜",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 88,
    "name": "å‡‰æ‹Œç•ªèŒ„æ´‹è‘±",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 89,
    "name": "å‡‰æ‹Œæµ·å¸¦ä¸",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 90,
    "name": "é¦™è‡é’èœ",
    "cuisine": "cn_home",
    "type": "side",
    "goals": [
      "balanced"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 91,
    "name": "ç»å…¸å‡¯æ’’æ²™æ‹‰",
    "cuisine": "salad",
    "type": "side",
    "goals": [
      "balanced"
    ],
    "tags": [
      "salad"
    ]
  },
  {
    "id": 92,
    "name": "ç•ªèŒ„èŠå£«æ²™æ‹‰",
    "cuisine": "salad",
    "type": "side",
    "goals": [
      "balanced"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 93,
    "name": "å¸Œè…Šé»„ç“œè²è¾¾æ²™æ‹‰",
    "cuisine": "salad",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 94,
    "name": "èŠéº»é¦™æ²¹è èœæ²™æ‹‰",
    "cuisine": "salad",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 95,
    "name": "è‹¹æœåšæœæ‚ç²®æ²™æ‹‰",
    "cuisine": "salad",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 96,
    "name": "è èœè—œéº¦å†·æ²™æ‹‰",
    "cuisine": "salad",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "salad",
      "vegetarian"
    ]
  },
  {
    "id": 97,
    "name": "è¥¿çº¢æŸ¿é¸¡è›‹æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced"
    ],
    "tags": [
      "mild"
    ]
  },
  {
    "id": 98,
    "name": "ç´«èœè›‹èŠ±æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced"
    ],
    "tags": [
      "mild"
    ]
  },
  {
    "id": 99,
    "name": "å†¬ç“œæ’éª¨æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "mild"
    ]
  },
  {
    "id": 100,
    "name": "ç‰ç±³æ’éª¨æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "comfort"
    ],
    "tags": [
      "mild"
    ]
  },
  {
    "id": 101,
    "name": "èŒè‡é¸¡æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "comfort",
      "protein"
    ],
    "tags": [
      "mild"
    ]
  },
  {
    "id": 102,
    "name": "èåœç‰›è…©æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 103,
    "name": "é…¸è¾£æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 104,
    "name": "æµ·å¸¦è±†è…æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 105,
    "name": "æ—¥å¼å‘³å™Œæ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced"
    ],
    "tags": [
      "mild"
    ]
  },
  {
    "id": 106,
    "name": "éŸ©å¼æ³¡èœè±†è…æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 107,
    "name": "å—ç“œæµ“æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "comfort"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 108,
    "name": "æ„å¼è”¬èœæ‚æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 109,
    "name": "ç‰›è‚‰è”¬èœç½—å®‹æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced"
    ],
    "tags": []
  },
  {
    "id": 110,
    "name": "è¶Šå—ç‰›è‚‰æ²³ç²‰æ±¤åº•",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "balanced"
    ],
    "tags": [
      "spicy"
    ]
  },
  {
    "id": 111,
    "name": "æ³°å¼æ¤°é¦™é¸¡æ±¤",
    "cuisine": "cn_home",
    "type": "soup",
    "goals": [
      "comfort"
    ],
    "tags": []
  },
  {
    "id": 112,
    "name": "æ°´æœé…¸å¥¶ç‡•éº¦æ¯",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian",
      "breakfast"
    ]
  },
  {
    "id": 113,
    "name": "èŠ±ç”Ÿé…±é¦™è•‰ç‡•éº¦ç²¥",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "comfort"
    ],
    "tags": [
      "vegetarian",
      "breakfast"
    ]
  },
  {
    "id": 114,
    "name": "é¸¡è›‹ç‰›æ²¹æœä¸‰æ˜æ²»",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "balanced",
      "protein"
    ],
    "tags": [
      "breakfast"
    ]
  },
  {
    "id": 115,
    "name": "ç•ªèŒ„ç«è…¿èŠå£«ä¸‰æ˜æ²»",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "comfort"
    ],
    "tags": [
      "breakfast"
    ]
  },
  {
    "id": 116,
    "name": "ç‰›å¥¶ç‡•éº¦ç²¥é…åšæœ",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "balanced"
    ],
    "tags": [
      "breakfast",
      "vegetarian"
    ]
  },
  {
    "id": 117,
    "name": "è èœè›‹ç™½ç…é¥¼å·",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "diet",
      "protein"
    ],
    "tags": [
      "high_protein",
      "breakfast"
    ]
  },
  {
    "id": 118,
    "name": "è—œéº¦é…¸å¥¶èƒ½é‡ç¢—",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian",
      "breakfast"
    ]
  },
  {
    "id": 119,
    "name": "è±†æµ†æ²¹æ¡ï¼ˆå°‘æ²¹ç‰ˆï¼‰",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "comfort"
    ],
    "tags": [
      "breakfast"
    ]
  },
  {
    "id": 120,
    "name": "ç‰ç±³é¸¡è›‹é¥¼",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "balanced"
    ],
    "tags": [
      "breakfast"
    ]
  },
  {
    "id": 121,
    "name": "é»‘èŠéº»ç³Šé…å…¨éº¦åå¸",
    "cuisine": "dessert",
    "type": "breakfast",
    "goals": [
      "comfort"
    ],
    "tags": [
      "vegetarian",
      "breakfast"
    ]
  },
  {
    "id": 122,
    "name": "ä½ç³–æ°´æœé…¸å¥¶æ¯",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 123,
    "name": "é»‘å·§å…‹åŠ›åšæœç¢—",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "comfort"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 124,
    "name": "æ¤°å¥¶è¥¿ç±³éœ²ï¼ˆå‡ç³–ç‰ˆï¼‰",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "comfort"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 125,
    "name": "çº¢è±†ç´«ç±³ç¾¹",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "comfort"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 126,
    "name": "æŠ¹èŒ¶çº¢è±†å†°æ²™",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "comfort"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 127,
    "name": "çƒ¤çº¢è–¯å—",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 128,
    "name": "èœ‚èœœæŸ æª¬æ°´æœç›˜",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 129,
    "name": "é…¸å¥¶å†»å¹²æ°´æœç¢—",
    "cuisine": "dessert",
    "type": "side",
    "goals": [
      "diet"
    ],
    "tags": [
      "vegetarian"
    ]
  },
  {
    "id": 130,
    "name": "æŸ æª¬è–„è·æ°”æ³¡æ°´",
    "cuisine": "dessert",
    "type": "drink",
    "goals": [
      "diet"
    ],
    "tags": [
      "drink",
      "vegetarian"
    ]
  },
  {
    "id": 131,
    "name": "æ— ç³–è±†æµ†",
    "cuisine": "dessert",
    "type": "drink",
    "goals": [
      "diet",
      "balanced"
    ],
    "tags": [
      "drink",
      "vegetarian"
    ]
  },
  {
    "id": 132,
    "name": "é»‘å’–å•¡",
    "cuisine": "dessert",
    "type": "drink",
    "goals": [
      "diet"
    ],
    "tags": [
      "drink"
    ]
  },
  {
    "id": 133,
    "name": "é²œæ¦¨æ©™æ±ï¼ˆå°‘ç³–ï¼‰",
    "cuisine": "dessert",
    "type": "drink",
    "goals": [
      "balanced"
    ],
    "tags": [
      "drink",
      "vegetarian"
    ]
  },
  {
    "id": 134,
    "name": "æ¸©çƒ­èœ‚èœœæŸ æª¬æ°´",
    "cuisine": "dessert",
    "type": "drink",
    "goals": [
      "comfort"
    ],
    "tags": [
      "drink",
      "vegetarian"
    ]
  }
];

    const CUISINE_LABELS = {
      "cn_home": "ä¸­é¤ Â· å®¶å¸¸",
      "cn_sichuan": "ä¸­é¤ Â· å·æ¹˜è¾£",
      "cn_cantonese": "ç²¤èœ / æ¸¯å¼",
      "japanese": "æ—¥æ–™",
      "korean": "éŸ©å¼",
      "western": "è¥¿é¤",
      "thai": "ä¸œå—äºš / æ³°å¼",
      "salad": "æ²™æ‹‰ / è½»é£Ÿ",
      "dessert": "æ—©é¤ / å°ç”œç‚¹"
    };

    const GOAL_LABELS = {
      "diet": "å‡è„‚è½»é£Ÿ",
      "balanced": "æ—¥å¸¸å‡è¡¡",
      "protein": "é«˜è›‹ç™½ / å¥èº«",
      "comfort": "å®‰æ…°è§£é¦‹"
    };

    function isVegetarian(recipe) {
      return recipe.tags && recipe.tags.includes("vegetarian");
    }

    function isHighProtein(recipe) {
      return recipe.tags && recipe.tags.includes("high_protein");
    }

    function isSpicy(recipe) {
      return recipe.tags && recipe.tags.includes("spicy");
    }

    function randomFrom(array) {
      if (!array.length) return null;
      const idx = Math.floor(Math.random() * array.length);
      return array[idx];
    }

    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function collectFilters(preset) {
      if (preset) return preset;
      const goal = document.getElementById("goalFilter").value || null;
      const cuisine = document.getElementById("cuisineFilter").value || null;
      const vegPref = document.getElementById("vegFilter").value || "any";
      return { goal, cuisine, vegPref };
    }

    function filterRecipes(filters) {
      let list = RECIPES.filter(r => true);

      if (filters.goal) {
        list = list.filter(r => Array.isArray(r.goals) && r.goals.includes(filters.goal));
      }

      if (filters.cuisine) {
        list = list.filter(r => r.cuisine === filters.cuisine);
      }

      if (filters.vegPref === "veggie") {
        list = list.filter(r => isVegetarian(r));
      } else if (filters.vegPref === "meat") {
        list = list.filter(r => !isVegetarian(r) || isHighProtein(r));
      }

      // å¦‚æœç­›å®Œå¤ªå°‘ï¼Œè‡ªåŠ¨æ”¾å®½æ¡ä»¶
      if (list.length < 6) {
        let relaxed = RECIPES.slice();

        if (filters.cuisine) {
          relaxed = relaxed.filter(r => r.cuisine === filters.cuisine);
        }

        if (filters.vegPref === "veggie") {
          relaxed = relaxed.filter(r => isVegetarian(r));
        } else if (filters.vegPref === "meat") {
          relaxed = relaxed.filter(r => !isVegetarian(r) || isHighProtein(r));
        }

        if (relaxed.length >= 6) {
          return { list: relaxed, relaxed: true };
        }
      }

      if (!list.length) {
        return { list: RECIPES.slice(), relaxed: true };
      }

      return { list, relaxed: false };
    }

    function pickMenuFromList(list) {
      const mains = list.filter(r => r.type === "main" || r.type === "salad" || r.type === "breakfast");
      const sides = list.filter(r => r.type === "side" || r.type === "salad");
      const soups = list.filter(r => r.type === "soup" || r.type === "drink");

      const menu = [];
      const usedIds = new Set();

      const main = randomFrom(mains);
      if (main) {
        menu.push({ role: "ä¸»èœ / ä¸»é£Ÿ", recipe: main });
        usedIds.add(main.id);
      }

      const sideCandidates = sides.filter(r => !usedIds.has(r.id));
      const side = randomFrom(sideCandidates);
      if (side) {
        menu.push({ role: "é…èœ / æ²™æ‹‰", recipe: side });
        usedIds.add(side.id);
      }

      const soupCandidates = soups.filter(r => !usedIds.has(r.id));
      const soup = randomFrom(soupCandidates);
      if (soup) {
        menu.push({ role: "æ±¤å“ / é¥®å“", recipe: soup });
        usedIds.add(soup.id);
      }

      if (menu.length < 3) {
        const remaining = list.filter(r => !usedIds.has(r.id));
        const shuffled = shuffle(remaining);
        for (const r of shuffled) {
          if (menu.length >= 3) break;
          menu.push({ role: "åŠ ä¸€é“", recipe: r });
        }
      }

      return menu;
    }

    function describeRecipe(recipe) {
      const parts = [];

      if (CUISINE_LABELS[recipe.cuisine]) {
        parts.push(CUISINE_LABELS[recipe.cuisine]);
      }

      if (isVegetarian(recipe)) {
        parts.push("åç´ ");
      } else if (isHighProtein(recipe)) {
        parts.push("é«˜è›‹ç™½");
      }

      if (isSpicy(recipe)) {
        parts.push("åè¾£");
      }

      if (recipe.goals && recipe.goals.includes("diet")) {
        parts.push("é€‚åˆæ§åˆ¶çƒ­é‡");
      }

      return parts.join(" Â· ");
    }

    function renderMenu(menu, filters, totalCandidates, relaxed) {
      const container = document.getElementById("menuResult");
      const metaEl = document.getElementById("menuMeta");

      container.classList.remove("empty");
      container.innerHTML = "";

      if (!menu.length) {
        container.classList.add("empty");
        container.innerHTML = "<p>ä»Šå¤©èœåº“æœ‰ç‚¹å®³ç¾ï¼Œæ²¡é€‰å‡ºæ¥ç»“æœï¼Œå¯ä»¥å†ç‚¹ä¸€æ¬¡è¯•è¯•ã€‚</p>";
        metaEl.textContent = "";
        return;
      }

      const bits = [];
      if (filters.goal && GOAL_LABELS[filters.goal]) {
        bits.push(GOAL_LABELS[filters.goal]);
      }
      if (filters.cuisine && CUISINE_LABELS[filters.cuisine]) {
        bits.push(CUISINE_LABELS[filters.cuisine]);
      }
      if (filters.vegPref === "veggie") {
        bits.push("åç´ ");
      } else if (filters.vegPref === "meat") {
        bits.push("å¤šåƒè‚‰ / é«˜è›‹ç™½");
      }

      const pickedText = bits.length ? bits.join(" Â· ") : "å®Œå…¨éšç¼˜æ­é…";
      const relaxedNote = relaxed ? " Â· å®é™…å·²è‡ªåŠ¨æ”¾å®½ä¸€ç‚¹æ¡ä»¶ï¼Œä¿è¯èœå¼å¤Ÿä¸°å¯Œ" : "";
      metaEl.innerHTML = `<strong>${totalCandidates}</strong> é“å€™é€‰èœé‡Œä¸ºä½ æŒ‘äº† <strong>${menu.length}</strong> é“${relaxedNote ? relaxedNote : ""}<br/><span>${pickedText}</span>`;

      for (const item of menu) {
        const card = document.createElement("div");
        card.className = "recipe-card";

        const glow = document.createElement("div");
        glow.className = "recipe-glow";
        card.appendChild(glow);

        const roleEl = document.createElement("div");
        roleEl.className = "recipe-role";
        roleEl.textContent = item.role;
        card.appendChild(roleEl);

        const nameEl = document.createElement("div");
        nameEl.className = "recipe-name";
        nameEl.textContent = item.recipe.name;
        card.appendChild(nameEl);

        const metaText = describeRecipe(item.recipe);
        if (metaText) {
          const metaEl = document.createElement("div");
          metaEl.className = "recipe-meta";
          metaEl.textContent = metaText;
          card.appendChild(metaEl);
        }

        const tagsRow = document.createElement("div");
        tagsRow.className = "tag-row";

        if (Array.isArray(item.recipe.goals)) {
          for (const g of item.recipe.goals.slice(0, 2)) {
            const pill = document.createElement("span");
            pill.className = "tag-pill goal";
            pill.textContent = GOAL_LABELS[g] || g;
            tagsRow.appendChild(pill);
          }
        }

        if (isSpicy(item.recipe)) {
          const pill = document.createElement("span");
          pill.className = "tag-pill spicy";
          pill.textContent = "æœ‰ç‚¹è¾£";
          tagsRow.appendChild(pill);
        }

        if (isVegetarian(item.recipe)) {
          const pill = document.createElement("span");
          pill.className = "tag-pill light";
          pill.textContent = "å¤šèœ / åç´ ";
          tagsRow.appendChild(pill);
        } else if (isHighProtein(item.recipe)) {
          const pill = document.createElement("span");
          pill.className = "tag-pill light";
          pill.textContent = "é«˜è›‹ç™½";
          tagsRow.appendChild(pill);
        }

        if (tagsRow.children.length) {
          card.appendChild(tagsRow);
        }

        container.appendChild(card);
      }
    }

    (function setup() {
      let lastFilters = null;
      let lastCandidates = RECIPES.length;
      let lastRelaxed = false;

      function generate(preset) {
        const filters = collectFilters(preset);
        const { list, relaxed } = filterRecipes(filters);
        const menu = pickMenuFromList(list);
        lastFilters = filters;
        lastCandidates = list.length;
        lastRelaxed = relaxed;
        renderMenu(menu, filters, list.length, relaxed);
      }

      document.getElementById("btnGenerate").addEventListener("click", () => generate());
      document.getElementById("btnShuffle").addEventListener("click", () => {
        if (lastFilters) {
          generate(lastFilters);
        } else {
          generate();
        }
      });
      document.getElementById("btnSuperRandom").addEventListener("click", () => {
        generate({ goal: null, cuisine: null, vegPref: "any", superRandom: true });
      });
    })();
  </script>
</body>
</html>
